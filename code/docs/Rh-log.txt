September 5, 1999
- The +moveup and +movedown commands finally do something.
- Added a fly cheat.
- Changed the handling of action commands so that they increment and
  decrement numbers in an array instead of setting and clearing bits in an
  int.
- Fixed R_AlignFlat(). Apparently, I broke it sometime (or it never worked
  properly in the first place). Also made it simpler.

September 3, 1999
- Added localambientsound and activatorsound ACS commands.
- Fixed the DLevelScript constructor to place new scripts in the array of
  RunningScripts (if not ACS_ExecuteAlways).

September 2, 1999
- Replaced the error abort in FArchive.cpp when an attempt is made to store
  a DObject, with a NULL object save instead. There are conditions that will
  come up during regular gameplay that will result in dangling pointers.
  Example: A lost soul attacks a monster. The attacked monster then sets its
  target field to the lost soul. Something kills the lost soul, and it
  destroys itself. The other monster is now left with a pointer to nowhere.
  The only reasonable solution to this problem I can think of is to collect
  a list of all objects that want to destroy themselves. At the end of each
  tic, they get destroyed, *and* all thinkers are searched for pointers to
  those object. If any pointers are found, they get NULLed.

September 1, 1999
- Significantly cleaned up G_ParseMapInfo(). It's easier to follow what it's
  doing, and now it's smart enough to give you an error message if you make
  a mistake in your MAPINFO lump instead of hanging.
- Added a flat warping effect similar to Quake's liquid textures.

August 31, 1999
- Added swimmable water. The forcewater cvar can be used to make all BOOM
  deep water swimmable.
- C_MidPrint() now adds messages to the console as well as the middle of
  the screen.
- Fixed the "you need a key" messages to only appear for the player who
  tries to activate the locked door.
- Restored the code for storing server cvars in savegames.

August 30, 1999
- Made items respawn the default for -deathmatch.
- After creating some huge log files, I believe I finally fixed the demo
  and network sync with bots. The bots use P_CheckPosition() to determine
  if a spot is free. This function can also causes items to be picked up.
  Thus, on the arbitrator's machine, bots pick up items before they do
  on the other machines, and they can also pick up items that they decide
  not to touch (and so don't pick them up on other machines). To fix, I
  made a wrapper for the bots that turns off their MF_PICKUP flag before
  performing the check and then sets it back after the check is made.
- Fixed the loading of the "straight-ahead" status bar graphics for skins.
  The corresponding patches weren't being moved into the skin's namespace.

August 28, 1999
- Fixed the bot's FakeFire() so that it doesn't do damage to anything
  that it might hit, by adding another thing instead of using MT_HEADSHOT.
- Another cause of the sync problem is in P_CheckSight(). If a monster
  is invisible, a random number is used to determine if the thing
  should be reported as not visible.
- Found part of the problem with bot sync: P_SpawnPlayerMissile() used
  a special routine when a bot wanted to fire. The routine aimed at
  whatever the bot's enemy was set at. Only on the arbitrary (and not
  during demo playback), can enemy ever be non-NULL. Changed this to
  just disable autoaim for bots. Should be effectively the same.
- Changed P_SpawnPlayerMissile() so that if a player has autoaim set to
  0, it doesn't try adjusting the angle left and right.
- Fixed projectile velocities by using vector math. Doom calculated the
  velocity on a 2D plane, then added in the vertical component.
- Fixed the bot's vertical aiming.
- Rewrote the parts of the Cajun that used degrees to use binary angles
  instead.
- Changed the Cajun's TurnToAng() function to let it turn both left and
  right, depending on which results in a shorter distance.

August 27, 1999
- Added the Cajun 0.97 code. Needs work yet: Bot looks up/down too far,
  always turns right, demos don't stay in sync, and networking with bots
  probably doesn't work either.

August 14, 1999
- Cleaned out a lot of the no longer relevant docs from the docs dir that
  came from the Linux source.
- Changed IdentifyVersion() so that it can look for an IWAD in one of four
  directories: current, program, $DOOMWADDIR, and $HOME. (The same search
  order used by BOOM.)

August 13, 1999
- Fixed the DLevelScript constructor. (Using local vars with the same names
  as member vars still isn't a good thing. :-)

August 12, 1999
- Made the vertical calculations in the renderer subpixel-accurate. This
  negates some of the work I did on the 10th. A pity. Something also needs to
  be done about the walls--they are horribly jittery.
- Moved the calculation of the initial texture coordinate out of the column
  drawers and into their callers. Besides making the column drawers simpler,
  it also allows for some optimizations of masked texture/sprite rendering,
  where the initial coordinate is almost always 0.
- Added variable field of view. Use the fov command to change it.

August 11, 1999
- When using -nosound, MIDAS's dsmClearBufferFloat() sometimes tries to free
  memory that isn't allocated (apparently already freed). To compensate, I
  avoid initializing MIDAS when -nosound or -nosfx is specified instead of
  setting MIDAS's nosound option.
- Found that when a stat display is active when the game is quit, a pure
  virtual function call was being made. Unfortunately, when I tried to track
  it down, the problem stopped.
- Optimized away two multiplies I had added to R_MapPlane() earlier. Oddly,
  performance seems unaffected.

August 10, 1999
- Did some performance tuning for the yslope movement loop in
  R_SetupFrame(). memmove() is not an intrinsic function, so I wrote some
  loops that VC++ optimizes nicely. (Other optimizing compilers should be
  able to do the job just as well.) I also split up the loop that calculates
  the yslope values into three cases so that the body of the loop can be as
  simple as possible.
  It probably wasn't worth the effort...
- Changed P_SpawnPlayer to set player_t::attacker to NULL so that invalid
  attackers aren't carried over across levels, which can cause the problems
  if you try to save your game before being attacked on the new level.
- Finished reimplementing hub travel. The new code in FArchive worked
  properly on the first try. (Yay!)

August 7, 1999
- Added some code to FArchive that distinguishes player-controlled actors
  (but not voodoo dolls) so that the stored actors can be overridden by
  explicitly spawned ones when travelling between levels in a hud. Untested,
  but I think it should work.
- For curiosity's sake, a did a comparison of savegame sizes with 1.17c and
  test9. The map tested was map29, just after spawning. The 1.17c snapshot
  for the level was 99542 bytes uncompressed (20659 compressed). The test9
  snapshot was 111786 bytes uncompressed (14824 compressed). So the new
  archive format is bigger but compresses better, which I'll consider to be
  a good thing, because snapshots are normally stored in memory in their
  compressed state.

August 6, 1999
- Changed the tag changing behavior of W_CacheLumpNum(). Before, it would
  always change a block's tag. Now, it will only change the tag if the new
  one is less than the previous. This way, a block can be promoted from
  PU_CACHE to PU_STATIC, but not the other way around. This was the cause
  of intermittant bugs that were visible in st_new.cpp. ST_New uses some
  graphics that also serve as sprite graphics. When those sprites are drawn,
  their tags were changed to PU_CACHE, and with enough spawning, their data
  could be overwritten, and st_new would never know.

August 5, 1999
- Changed M_Drawer() to use V_BreakLines() to split lines for prompt
  messages, because it wasn't working right. Also fixed a bug in
  V_BreakLines() so that now it will recognize blank lines.
- Added nofilecompression cvar to prevent compression of LZO files.
- Fixed savegames.
- Made the thinkers the first thing that gets serialized in a level
  snapshot (instead of sectors and walls), because a sector's specialdata
  fields might cause a thinker to be serialized. But when
  DThinker::SerializeAll is called, it destroys all existing thinkers,
  including the ones that were created while reading the sectors. Storing
  the thinkers before anything else avoids this.
- Moved the serialization of player data into G_SerializeLevel. The bots
  use pointers to some actors in their player_s, so we need to keep the
  player data in the same context as the actors they reference. (i.e. They
  need to go in the level snapshot instead of outside of them as was done
  previously.)
- Also fixed a bug with FLZOFile::Write. If a large write request was made,
  it would only double the amount of memory to store the file in, which
  might not have been enough. Now it doubles it until the buffer is large
  enough to store the new data.
- Figured out what was wrong with storing FLZOMemFiles in an archive: I was
  forgetting to add the 8 bytes of header to the size of the block to write
  out.

August 4, 1999
- Hubs somewhat work. Level data is properly stored on exit and loaded when
  reentering the level. I just need to fix the player spawning. Savegames
  are another matter. I seem to be having trouble embedding an FLZOMemFile
  inside an archive. It appears to be getting saved properly, but trying to
  decompress it crashes.
- Got the FArchive class working. It is now able to write out objects and
  reconstruct them, filling in pointers as appropriate. Cool.

August 3, 1999
- Instead of relying on Z_FreeTags to remove all thinkers when a new level
  is started, I now call DThinker::RemoveAllThinkers, so that any subclasses
  of DThinker that have custom destructors can have them called. Currently,
  the only one with a destructor is DACSThinker, which destroys all the
  active scripts.
- Created a thinker responsible for running the ACS scripts, because it
  makes serializing them easier.
- Moved some of the mobj handling functions into the AActor class. Most
  notably, P_SpawnMobj and P_RemoveMobj are gone. Use the new and delete
  operators instead. AActor has a constructor that takes the same parameters
  as P_SpawnMobj, so converting old code to use new is easy enough.

August 1, 1999
- Changed the code in i_music.cpp to use a simple class hierarchy for
  defining music formats and how to play them. This removed some (messy)
  switch statements and the nameless unions (that I guess mingw32 chokes on).
- Rearranged the atterm functions so that I_ShutdownMusic() is called before
  I_ShutdownSound() to prevent crashes when a MOD is playing at shutdown time.

July 31, 1999
- Removed the lists of active ceilings and plats, mainly because it makes
  the serialization code simpler, but also because the same result can be
  achieved (albeit more slowly) by searching the list of thinkers for each
  instance of DCeiling or DPlat.
- Made the active buttons (button_t) and earthquakes (quake_t) subclasses of
  DThinker (DActiveButton and DEarthquake, respectively).
- Created a TThinkerIterator template class to manage iterating through the
  list of active thinkers.

July 28, 1999
- Ever since I added the extra network commands (like say) around a year ago,
  I have been executing them the instant they arrived from the network. I
  have only now figured out that this is wrong. They should be stored and
  only executed when the gametic they arrived with is executed. With commands
  like say, the timing is unimportant. With other commands, like changemap,
  it can be vital that all machines execute the command on the same gametic.
- Made some changes to the ticcmd building code in d_net.cpp to compensate
  for ticdups greater than 1 by dividing pitch and yaw deltas by the ticdup
  value so that the end result of moving the mouse a certain distance is the
  same as if a ticdup of 1 were used. This is also necessary to make bots
  work with ticdups other than 1.
- Fixed the crazy bot turning. The cause? I was calculating angle deltas for
  the bots' ticcmds based on their yaw when their think routine was called.
  This is incorrect, because that yaw can incorrectly reflect the state of
  the current gametic, because maketic can be more than 1 tic in advance of
  gametic. The correct way is to take the bot's current yaw, add all the
  deltas that haven't been played yet to it, and using the resulting yaw as
  the base for the current maketic's yaw delta. In some ways, this is exactly
  what you would also do for player prediction.

July 26, 1999
- Removed G_InitPlayer(). It was never used and just called G_PlayerReborn().

July 23, 1999
- Spent too many hours tracking down a circular #include dependancy I had
  inadvertantly created yesterday.

July 22, 1999
- Did some work with the savegame serialization.

July 21, 1999
- Changed P_SpawnMapThing() to silently reject mapthings of type -1.
- Fixed kill command to restore player's MF_SHOOTABLE flag before doing the
  damage.
- Changed bot observer mode to use noclip instead of noblockmap. Otherwise,
  the player is unable to ride lifts while observing.
- The bot code spawns bglobal.body1 and bglobal.body2 actors to help with
  aiming. The original code would carry pointers to these over between
  levels, even though all actors disappear when travelling between levels.
  Not a good thing. Fixed.

July 20, 1999
- Changed the network code so that now bots work in network games. Their
  ticcmds are sent along with the arbitrator's to the other players in the
  game. This way, only one computer is responsible for doing the bot
  thinking. (BOOM's random number generator was extremely useful for this.)
  Unfortunately, the bots seem to have trouble aiming with more than one
  live player and often end up spinning wildly.
- Made weapondrop a server variable.
- Fixed bots so that they can be recorded in savegames. There were two things
  preventing it before: 1) The bots ticcmd was being written directly to the
  player structure instead of netcmds, so the demo writer never had a change
  to see the bot's commands. 2) There are several places in the bot code that
  fiddle with the bot's angle directly. The quick (and acceptable) fix was to
  keep the fiddling in, but use the new angle to calculate the bot's ucmd.yaw
  value and set its angle back to what it was before being fiddled.
- Delayed the call to I_InitMusic() in I_InitSound() until after MIDAS
  is initialized. Also removed the call to I_ShutdownMusic() in I_InitSound(),
  since I_ShutdownMusic() will be called automatically at exit.

July 19, 1999
- Made the network arbitrator changeable, so that if player 1 leaves the game,
  someone will still be able to control things.
- Moved the call to I_FinishClockCalibration() before D_CheckNetGame().

July 17, 1999
- Changed several references in am_map.cpp from plr to the console player's
  camera. Also added colors for inter- and intra-level teleporters.
- Changed P_PlayerThink() so that the game doesn't die if you try to add more
  bots than there are coop starts (in a coop game, of course).
- Fixed removebots command so that if you are looking through a bot's eyes
  when you remove the bots, your vision is restored to your own head.

July 16, 1999
- Fixed the rotation of player arrows in the rotating automap in coop games.
- Changed wipe_initBurn to allocate FIREHEIGHT+5 rows. Apparently FIREHEIGHT+4
  wasn't enough.
- Fixed SN_StartSequence so that it doesn't attempt to play nonassigned
  sequences. I had broken it when I separated part of the code into a
  separate TwiddleSeqNum function.

July 14, 1999
- Moved the "VectorCopy (RailEnd, end);" line in P_RailAttack() in front of
  the for loop.

July 12, 1999
- Enclosed the bot thinking code inside if (bglobal.botnum) {} blocks so that
  no bot thinking occurs when there are no bots. Also defaulted bot_calcnodes
  to 0. If a bot is spawned, and there are no nodes loaded, bot_calcnodes
  will automatically be set to 1. Now the bots don't eat up any time if none
  are present in the world.
- Added a generic FStat class. Different statistics can be measured and
  reported by subclassing it. The console command "stat" provides the
  interface to select which stats to view.
- You cannot directly call a constructor from inside another constructor to
  help do initialization. Instead, you end up with a temporary object that
  is destroyed immediately when the second constructor finishes. This was
  causing crashes with wall scrollers, because their constructor was calling
  the constructor for more general scrollers.

July 11, 1999
- Changed the bot code so that it doesn't go into multiplayer mode until
  after a bot is spawned, so the game won't be in coop mode when players have
  no intention of playing with bots.

July 10, 1999
- Changed ReplaceString() function to properly handle the case where the 
  string being replaced is the same as the new one.
- Cajun bot now runs under ZDoom, although some things aren't perfect (such
  as skin color).

July 9, 1999
- Received the Cajun bot source. Started moving it to ZDoom.

July 7, 1999
- The sky can now scale horizontally as well as vertically (when using
  r_stretchsky), so its aspect ratio is preserved when stretched.
- Redid the Wu line drawer to support 64 intensity levels and wrote a version
  that used the translucency tables so that it could look good in overlayed
  mode. Also cleaned up the code to make it more readable (to me anyway) and
  removed the use of short ints.

July 6, 1999
- Restored Cmd_Exec to it's 1.17c version. I'm not sure what I was trying to
  accomplish with the changes I made, but they broke it under certain
  situations.

July 5, 1999
- Added Heretic's anti-aliased Wu line drawer to the automap.
- Delayed the execution of cvar callbacks until the video subsystem has been
  initialized.

July 3, 1999
- ST_Start() now sets the status bar dimensions.
- Fixed some of the DCanvas member functions that used width and height as
  parameters. Having two function parameters with the same names as two
  member variables is not a good thing...

July 2, 1999
- Converted screen_t to class DCanvas and moved a bunch of the screen drawing
  functions into it. This let me catch a few instances where the screen
  dimensions were being referenced before they were initialized.
- Found this code in i_input.cpp under WM_ACTIVATE:
		if (Fullscreen)
		{
			extern int DisplayWidth, DisplayHeight, DisplayBits;
			I_SetMode (DisplayWidth, DisplayHeight, DisplayBits);
		}
  Apparently, I added it when converting the video code to OpenPTC and
  completely forgot about it. I still don't remember adding it. This was
  probably the cause of problems starting up in fullscreen mode with some
  chipsets. (Banshee and Voodoo3 are the two I know about.)
- Changed refreshDisplay() in i_video.cpp to not do anything during startup.
- Added a WM_GETMINMAXINFO handler to prevent the user from shrinking the
  window smaller than the surface.

July 1, 1999
- Added default aliases for idclip and idspispopd that point to noclip.
- Further fleshed out the DConsoleCommand and DConsoleAlias classes. Commands
  and aliases are now hashed in the same array, and aliases get saved to the
  config file again.
- Changed PIT_ChangeSector() to not call P_DamageMobj() if the crushing damage
  is 0. This is the way it used to be in Doom (so I hear; I don't feel like
  checking), but not in Hexen.
- Added a check to P_SpawnMapThing() to not bother checking mapthings of
  type 0. Apparently, some maps in Final Doom actually have these.
- DActor.movecount needs to be signed; there are places in p_enemy.cpp that
  test if it is < 0. I had changed it to unsigned. Making it signed again
  fixed the problem in test1 that made monsters act as if they had "bad
  vision."
- Changed P_AimLineAttack to calculate the top and bottom slope based on a
  spherical 64 degree vertical field of view instead of just adding some
  values to the center slope. With things that look straight ahead, the
  result is the same as the original Doom. With things that don't, the result
  is more correct than before. Also fixes the BFG problem in test1.

June 30, 1999
- Did some cleanup. Released 118test1.

June 29, 1999
- Made the actor's pitch member variable represent an angle between -ANGLE_90
  and +ANGLE_90 exclusive instead of a screen sliding amount. Now the same
  representation can be used for the current engine and any possible future
  ones that offer true 6 DOF. This also makes the relationship between pitch
  and all the slope values Doom uses for collision detection more apparent--
  just take the tangent of the pitch instead of multiplying it by a magic
  number.

June 23, 1999
- Moved the multiplication by lightscalexmul out of the inner wall
  rendering loop so that it can be stepped instead, saving all the time I
  used to be spending multiplying.
- Finished converting all cvars to a cvar_t class. Use the macros defined in
  c_cvars.h for declaring them. One (possibly significant for mods) change
  is that callback functions are now always called when a cvar is created.
  If callback depends on something else being initialized to work properly
  (see snd_mididevice in i_music.cpp), either make sure the callback only
  does its thing once the stuff it needs has been initialized, or don't
  create any instances of the cvar until the initialization has finished.

June 17, 1999
- Added flat scaling, manual panning, and rotation.
- Fixed a problem with PCD_UNARYMINUS. It was popping the result off the
  stack, so any calculations that used it were wrong and could potentially
  crash.

June 15, 1999
- Got the program to compile and link as C++ code. Some structs have been
  transformed into classes, and savegames are disabled until I can get
  serialization to work.

June 11, 1999
- Found an interesting problem with EV_StartLightFlickering. It takes two
  parameters describing the light levels, but they were completely ignored.
  Fixed.

June 7, 1999
- Changed R_FakeFlat to optionally not care about whether or not the camera's
  current sector is also in a sector referenced by a Transfer_Heights special.
- Changed all numspechit loops in the code to test against (numspechit > 0)
  instead of (numspechit--).
- Changed Thing_Projectile(Gravity) so that it should work properly with any
  non-missiles.
- Fixed a bug in P_NightmareRespawn caused by mindlessly cutting-and-pasting
  from P_SpawnMapThing.
- Found a bug in the translation of BOOM generalized floors/ceilings. One
  of my bit shifts was off by one. Also fixed the code in zwadconv.
- Changed the boss brain's height back to 16 for compatibility with
  Strain MAP20.
- A few days ago, I tried sorting the edges of polyobjects at runtime to
  support concave polys at any rotation. It didn't work. I'll probably
  have to use a span buffer.
- Stuck in my new span drawer. I actually wrote it about two months ago.
  Now it's finally going to be in a release version of ZDoom. It's about
  6 fps (~23%) faster at 1024x768. Also removed ds_colshift because it is
  no longer used and the unrolled span drawer in linear.nas.
- The turbo cvar's callback wasn't being called when it was set. Fixed.
- This a huge gap between log entries. Sorry, but I've been too lazy to
  write anything here.

March 15, 1999
- Added support for custom ambient sound attenuations. This is an optional
  floating point value that follows the point keyword.
- For 1.17, I had changed the sound volumes in s_sound.c to floats
  *except* for the ambient sounds which were still being treated as byte
  values between 0-255, so they would always play at full volume. Fixed.

March 14, 1999
- Discovered a savegame bug: An mobj's translation table was being saved
  improperly and could point to invalid memory on reload. Fixed.
- Added another dmflag, DF_RESPAWN_SUPER, to cause invulnerability and
  invisibility to respawn. No room in menu, so you have to set it by hand.
- Added an alwaysapplydmflags cvar that can be used to cause dmflags that
  normally only affect deathmatch to apply to single player and coop games
  as well.
- Changed P_Thing_Spawn() so that it can spawns things anywhere and not
  just at map spots. (Useful for making it look like a monster was carrying
  an item.)
- Added support for MBF's sky texture transfer linedefs. Also added support
  for Hexen's Sky2 sector special.
- In r_plane.c, spanstop was never used anywhere. Removed it.

March 10, 1999
- Made the network code "better." htons is used in the appropriate places,
  and the port a packet is sent from is used to determine which node sent
  a packet (so now I can test more than two-player games on my machine).
- Added an event-driven timer routine. Instead of busy waiting for a new tic,
  I can wait on an event and give other processes some CPU time. This makes
  two-player games on one machine run much more smoothly on Windows 95/98.
  (It was already smooth for the foreground player on NT.)

March 8, 1999
- Fixed a problem with R_DrawPSprite. It was leaving vis->translucency unset,
  which could produce odd results depending on the contents of the stack.

March 7, 1999
- Discovered a big problem with my linked list of ceiling_t's implementation.
  Fixed.

March 6, 1999
- Added two new screen wipes: burn and crossfade.
- The mid-screen message gets cleared out on level load now.
- Stopped using the zone heap to store level snapshots.
- Enhanced the stealth monsters so that they will take advantage of all
  translucency levels available.
- Fixed the damage for A_MonsterRail. I guess DOOM doesn't copy the damage
  amount out of the mobjinfo when an mobj is spawned.
- Added a check to the fullscreen HUD to prevent it from going outside the
  array of armor pictures if the AC was above 2.
- The DeHackEd code was setting the Blue AC for max soulsphere health. Fixed.
- Tried out Rick Clark's toxplant.wad and discovered a bug with the
  particles: They were colored by whichever sector was drawn last and not
  the sector they were in. Fixed.
- Pulled the old info.h from the 1.17a source so I could get things in a
  working state to put up a fixed DeHackEd version for the Ground Zero TC.

March 4, 1999
- Word of advice: When you have 2847 states and 399 mobjinfos (from Hexen)
  to reformat, don't try to do it all by hand. I was smart enough to use a
  program to convert all the states into the multigen format, but I thought
  I could handle the mobjs myself. Ha ha ha ha ha ha! After a few hours,
  my arm was aching, and I had only done about one fourth of the mobjinfos.
  Then I wrote a program to convert the ones from Hexen's info.c into
  multigen format, and all I had to do was drag them to the correct place
  with my mouse. Much easier, and much less strenuous. (Also much less
  error-prone.)

  For comparison, Heretic has 161 mobjinfos and 1205 states.
  Doom 2 has a mere 137 mobjinfos and 967 states.

March 3, 1999
- Had a change of plans about how I want to implement multiple games in a
  single executable. All the data in info.c and info.h will be moved to an
  external data file whose format is based on that used by multigen (the
  tool id used to generate info.c). The list of spawnable things will also
  be moved out of p_things.c and into this file.
  
  This means that everything I did in info.h on March 1 was wasted. Oh well.

March 1, 1999
- Pasted labels for the Heretic and Hexen things into info.c. Had to
  shuffle a few of them around:

  --- Things renamed ---
	MT_MISC* -> MT_DMISC* (if Doom)
				MT_HMISC* (if Heretic)
				MT_XMISC* (if Hexen)
	MT_BARREL -> MT_HBARREL (for Heretic)
				 MT_DBARREL (for Doom)
	MT_TFOG -> MT_DTFOG, MT_HTFOG, MT_XTFOG
			   created a new MT_TFOG elsewhere. the others should be
			   copied on top of it as appropriate.
	MT_HEAD -> renamed Doom's to MT_CACODEMON
	MT_KNIGHT -> renamed Doom's to MT_HELLKNIGHT
	MT_FIREBOMB -> MT_HFIREBOMB, MT_XFIREBOMB

  --- Things moved into common Heretic/Hexen section ---
	MT_ARTIFLY
	MT_ARTIINVULNERABILITY -> ditto
	MT_ARTIEGG -> ditto
	MT_EGGFX -> ditto
	MT_ARTISUPERHEAL -> ditto
	MT_ARTITELEPORT -> ditto
	MT_SPLASH
	MT_SPLASHBASE
	MT_LAVASPLASH
	MT_LAVASMAKE
	MT_SLUDGECHUNK
	MT_SLUDGESPLASH
	MT_BLOODSPLATTER
	MT_BLOODYSKULL
	MT_MNTRFX1
	MT_MNTRFX2 (deathsound is sfx_phohit in Heretic, no sound in Hexen)
	MT_MNTRFX3
	MT_SOUNDWATERFALL

  --- Things moved to global section ---
	MT_BLOOD (note that Hexen's blood has mass 5, not 100. was #38)
	MT_TELEPORTMAN (was #41)
	MT_PLAYER (was #0) Hexen's is name differently, so it didn't move.

	(Hexen things renamed)
	MT_MINOTAUR -> MT_MAULATOR
	MT_SOUNDWIND -> MT_XSOUNDWIND

- Added a pulsating effect for the invisibility powerup that slowly
  "pulses" it in and out of visibility, but never going below 25%, so it's
  never totally invisible.
- Spent a few hours with the DOSDoom translucency code. I think the
  greenness of it is probably more the fault of DOOM's limited palette,
  particularly after comparing the 25% translucency table from before
  with 25% translucency now. Very low levels of translucency with one
  of the colors being dark are still too green, though.

February 28, 1999
- Added DOSDoom 0.65's translucency code. I'm not sure if it was really
  worth it, though. I tried Allegro's RGB table code to speed up the
  generation of the translucency table, but it didn't seem to produce
  very satisfactory results, so I use BestColor to find palette colors
  to use. The results are satisfactory, but they seem a bit too green.
- Delayed gathering of data on a sprite's patches (width, topoffset, and
  offset) until it is needed (either when the level is precached, or when
  the sprite is first seen). Game startup is a great deal quicker without
  any noticable performance hit elsewhere. Cool.

February 27, 1999
- Note: Hexen's friction is roughly equivalent to a Sector_SetFriction of
  171 (ends up as 0xf909, Hexen uses 0xf900). Player movement thrust should
  be halved at this level. Changed the calculation of sector->movefactor
  accordingly. (With the BOOM code, player thrust was nearly one fourth
  normal with that level of friction.)
- Discovered that MBF's code to affect monsters with friction doesn't
  work without the change it made to how mobjs are linked into the blockmap.

February 24, 1999
- Stopped using stdio in w_wad.c.
- Had left some calls to W_Profile in W_InitMultipleFiles(). Removed.

February 21, 1999
- Added support for real looping sounds, because Herian 2 used so many of
  them, and the old method sounded pretty bad with them.
- Found a problem with sliding polyobj doors: If, when they try to close,
  they can't move anywhere from their open position, they would move
  slightly further open and leave a gap when they managed to close. Fixed.
- Added support for auto-loading of skins if they're in a skins directory
  in the same directory as the executable.
- Added support for C-style formatting codes to ACS print statements.
- Fixed a problem where, when a player turns into a pile of bloody gibs
  (from e.g. a crushing ceiling), they would assume their standing position.
  This is because the gibs are a different sprite, and I wasn't letting
  player mobjs change their sprite.
- Fixed ceilings so that they stop making noise when they get put in stasis.
- PIT_ChangeSector() can spawn particle blood now.
- Fixed R_DrawSplash2() so that it doesn't draw all the particles to the
  left of the impact point.
- Added an A_MonsterRail function so monsters can shoot a railgun too.
- Fixed the railgun sound when you're not the one shooting it. My algorithm
  for finding the closest point on the line was wrong and still should
  remnants from when I was calculating the distance from the line.
- Fixed some player bobbing problems.

February 20, 1999
- Changed sparks to play with static attenuation.
- Found out why pickup messages would sometimes seemingly print several
  times for a single item. Some maps have several of the same item on top
  of each other so that a player can get more than they would normally
  without even realizing it. I get around this by disallowing two identical
  pickup messages from being printed back-to-back in a single tic.
- Fixed transsouls. I wasn't calling its callback at initialization, so it
  wouldn't take effect until the next time it was changed at the console.
- Recompiled PTC with DDFLIP_WAIT enabled. I had accidentally left it off
  from my testing run on January 8.
- Dug up the DirectDraw code from 1.12 and used it to add DirectDraw support
  back into the game. Now even people who can't get PTC to work should be
  able to use it.
  One interesting thing I noticed is that IDirectDrawSurface's Blt method
  is horribly slow for blitting between system and video memory. I tried it,
  thinking it would be optimized, but it wasn't even close.
- Added the A_Die, A_Detonate, and A_Mushroom routines from MBF.
- Removed the screens array and replaced it with a single variable named
  (oddly enough) screen.
- Added a V_SetBlend() to F_StartFinale() to get rid of any palette flashes
  that might have been on screen (such as after finishing E1M8).
- Discovered the real reason why the brain shooter wasn't working. DOOM
  doesn't explode noclip missiles when they go above the ceiling or below
  the floor; it just adjusts their positions. Hexen doesn't have that check
  for noclip, so it will explode/remove it. I guess I didn't check MAP30
  after adding Hexen's z-checking.

February 19, 1999
- Finally got around to fixing V_DrawPatchFlipped(). Wow, that was easy. I
  wonder why I was having so much trouble with it the last time I touched it
  many months ago.
- Changed the item pickup sounds to play with a NULL entity for the local
  player (like before), but still play on CHAN_ITEM for other players.
- Fixed the problem of monster names not being drawn in the cast finale: I
  was still xoring each character with 0x80 to make it red under the old
  text system.
- Changed the keyboard code so that the keypad isn't translated into number
  keys in full console mode with the menu active.
- Fixed the Read This! sequence of menus in Ultimate Doom. When it's
  finished, it's supposed to re-enable the skull and empty the stack.
- Fixed a problem with raise doors. In Doom, you can close them prematurely
  by activating them again. I had the right idea:
		if (GET_SPAC(line->flags) == SPAC_PUSH)
  but it should have been
		if (GET_SPAC(line->flags) != SPAC_PUSH)

February 18, 1999
- Release 1.17 again, hopefully this time for good.
- Fixed some problems that were already found with 1.17:
  * The cubes spawned by the boss on DOOM2/MAP30 would be in the ceiling and
    disappear right away. (All I can say is that it worked before; I don't
	know why it stopped.)
  * Because of my quick hack for voodoo doll obituaries, getting killed by
    the world would crash.
  * Open scripts above 255 wouldn't properly restart when the level
    reloaded because the game thought they were still running.

February 17, 1999
- Made a final "final" compile of 1.17.
- Removed the hack that could transform normal exits into Teleport_NewMaps
  during the level translation process.
- Realized I had forgotten to do the following, so I did them:
  * Support the MF_TRANSLATION bits for DeHackEd patches that use them.
  * Add a TRANSLUC75 .bex mnemonic for symmetry.
  * Add a defaultmap entry for MAPINFO lumps.
  * Make r_columnmethod 1 the default.
  * Add a neverswitchonpickup cvar.
  * Extralight and fullbright need to be ignored in foggy areas.

February 16, 1999
- Did a final compile for 1.17 under both DOS and Win32. This will be the
  first release where I release versions for both operating systems
  simultaneously. Eventually, I'll have to abandon DOS if I want to keep
  progressing, but for now it's nice to be able to do this.
- Removed the limit on the number of sound sequences that can be loaded.
  There's still a limit on the number of translation slots, and I think
  it's good to leave it that way.
- Added a menu stack, so that pressing escape to back out of a menu only
  backs up through the menus the user has visited.
- Tried adding some code to djgpp/i_video.cpp so that it could write
  directly to VGA memory. Then I found out that regular VGA mode 13h
  doesn't support page flipping, so I took it out.

February 14, 1999
- Added some #ifdef's to i_sound.c so that it works equally well with
  both VC++ and DJGPP.
- Added support for Hexen's parallax skies. I'm not sure why I thought
  the front one was a normal masked texture. (It uses color 0 to indicate
  transparency instead.) I also removed R_DrawMaskedSky() and added the
  restriction that both sky textures must be the same height.

February 13, 1999
- Tried boomedit.wad, and it turns out I was wrong about ML_PASSUSE. Non-
  use lines could and did eat uses. Changed it so that only SPAC_USE
  does now.
- Moved the functionality of the ML_PASSUSE flag into a new activation
  type: SPAC_USETHROUGH. The flag was only applicable to use activation
  lines, so it seemed sensely to have it wasting a bit for all other
  types. Now I have a free linedef flag if I need it.
- Removed the hack to allow players to move if they were currently stuck.
  With it in, polyobjects could push players through walls, which is even
  more undesirable. Since I'm now using MBF's momentum code (which, like
  Doom's but not Boom's, allows players to build up enough momentum to
  escape from walls if they're trivially inside them), I don't really need
  the "fix" anyway.
- Added a revert argument to the ChangeCamera special that causes the camera
  to move back inside the player's head if he moves.
- Added a SetPlayerProperty special.
- Created things for the particle fountains and sparks.
- Created sound sequences for the appropriate Doom sector movements. I also
  had to expand on the language as defined by Hexen a bit.
- Replaced my floor waggling code with Hexen's, so now it's right.
- Added three new level flags:
	* evenlighting
	* noautosequences
	* forcenoskystretch
- Added a progress indicator for the translucency table building process.

February 12, 1999
- Removed the round-robin assignment of virtual channels in i_sound.c. Since
  we're no longer letting MIDAS pick the sfx channels for us, this is
  pointless (and potentially hazard-prone if many sounds are being played
  very frequently).
- Added support for sound sequences, so now the polyobjects aren't silent
  when they move.

February 11, 1999
- Added "support" for 0-length sounds. (Meaning they get replaced by dsempty
  instead of crashing when malloc tries to alloc 4 gigs for them.)

February 10, 1999
- Adopted Hexen's script parsing code (sc_man.c). It lends itself toward
  much cleaner script handling code. [no association with ACS]

February 7, 1999
- Incorporated MBF's friction code in place of BOOM's. (Incidentally, I also
  discovered that I had left out some of BOOM's. No matter now.)
- Added a hack to P_XYMovement() so that players will still be able to move
  if they get stuck inside a line or another thing.

February 6, 1999
- Played some deathmatch with gothicdm2 and noticed two problems:
    * On rare occasions, I would spawn and be stuck.
	* Weapon pickup messages would sometimes print more than once. (Was I
	  picking them up more than once when I ran over them? Not sure.)
	* Once when the other player died, he didn't turn into a corpse.
- Added the ability to activate scripts by picking up items.
- Changed the polyobject functions called from p_lnspec.c so that they take
  individual paremeters rather than a byte array of args.
- Demos can now be played from disk without first loading them with the
  -file parameter.
- The automap will now follow the console player's camera rather than the
  console player himself.
- Added a notice warning that a demo will go out of sync if it was recorded
  with a different version of the game.
- Added playdemo and timedemo commands.
- Added colored text support and different message levels. This was
  planned for several months, and now I've finally written the code for it.

February 4, 1999
- Modified C_AddNotifyString() so that it properly supports lines
  ending with '\r' or '\n' instead of assuming that they all end with
  '\n' and starting each on a new line.
- Fixed a problem with PTR_CameraTraverse() that could position the
  chasecam inside a two-sided wall.
- Removed the handling for ANIM_RANDOM from wi_stuff.c since it wasn't
  used anywhere.

February 3, 1999
- Removed the use of screens[1] in wi_stuff.c by allocating a new screen
  just big enough to hold the background image and then blitting that to
  the screen each frame.
- Changed the demo loop a bit so that it will automatically try to play
  any number of demos beginning with DEMO1 and continuing up in sequence.
  (Of course, since I removed the ability to play old-style demos, it's
  only of use for wads that provide their own demos.)
- Did a bunch of miscellaneous cleanup from the Hexen source.
- Fixed player extreme deaths playing "*gibbed" instead of "*xdeath1".
- When a player leaves a network game, their body is now removed.
- Removed the check against monsters crossing secret lines. They *can*
  cross secret lines and activate them, they just don't use/push secret
  lines.

January 31, 1999
- Linedef type 134 was being improperly translated to require a blue key.
  It should have been red.
- Fixed a round-off problem in P_ZMovement() that could cause the player's
  landing sound to play when the player wasn't falling fast enough. For
  some reason, converting the floating point minimum momz to an it was
  subtracting one (even though it was already integral). So, for normal
  gravity, it was comparing the player's z momentum against -524287
  instead of -524288.
- Fixed a crash bug in M_LoadDefaults() when migrating from a pre-1.14
  config file without any binding for F5.

January 30, 1999
- Added blood, gunshot, and grenade particle effects.

January 29, 1999
- Fixed up the handling of .bex thing mnemonics and added the names for
  the second set of flags (albeit, not many are actually implemented).

January 27, 1999
- Created a new traversal function for the rail gun.
- Finally figured out why so many lost souls spawned by pain elementals
  were getting stuck. I was spawning two lost souls in the same spot (where
  there should have been only one). Oops.
- Found a case where the sight-checking code could trace a line that missed
  its ending cell and continue off the edge of the map, thus crashing the
  game. Made some changes to compensate: When the ending column or row is
  reached, mapxstep or mapystep will be set to 0 to prevent it from
  traversing any further in that direction.
- Using spynext and spyprev now briefly display the name of the player
  you switched to.

January 25, 1999
- Added armor and keys to the fullscreen HUD.

January 24, 1999
- Imported Hexen's z-checking code in place of my own. Hopefully it will
  work better. Also added a few other Hexenism while I was at it, like
  bouncy objects.
- Sped up wipes on tall screens so they should be about the same speed as
  one 200 pixels tall.
- Fixed plats so that they properly rebound off the ceiling. I was
  checking if the plat's crush field was non-zero when I should have been
  checking that it wasn't -1.
- Made some more improvements to D_ErrorLoop().
- Fixed some problems with the lighting with different r_detail values.
- columnofs[] was being constructed wrong for horizontally stretched
  detailed modes (too far to the right). Fixed.
- Added some unrolled drawers based off the Hexen source for 320x200
  and 320x240. I don't expect anything but a 386/486 to benefit from them.

January 23, 1999
- Fixed the light-amp so that it doesn't turn off colored lighting.
- Added positional sounds. Now that I have them, I also removed the
  temporary switch mobj that was used to provide a place to play the
  switch sounds.
- During demo playback, the chase command will now let you switch to
  and from the chasecam, so chasedemo isn't really needed unless you want
  to start the demo in chasecam mode.
- Added the player's score to the fullscreen HUD in deathmatch.
- Fixed the spynext/spyprev commands so that they properly update the
  status bar when you switch to another player. Also fixed it so the
  camera doesn't stay in a dead player's corpse if you're not watching
  the person who recorded the demo.
- Fixed the alignment of the scores display at high resolutions and also
  added a level countdown timer if timelimit is in effect (ala Lithium).
- Removed Hexen's solution for getting the player to produce more than
  one sound and adopted Quake's: each mobj has 8 channels with some of
  them set aside for predefined uses.

January 21, 1999
- Stopped using MIDAS's auto effect channels and started using the ones
  calculated by the game's own sound code. This seems to have fixed all
  the previous problems with sounds cutting out prematurely.

January 20, 1999
- Adjusted the WEAPONTOP #define in p_pspr.c so that the player sprites
  will meet the bottom of the screen at higher resolutions instead of
  leaving a gap.

January 17, 1999
- Added a chasedemo cvar. When it's true, the demo is played back in
  chasecam mode.
- Fixed a memory leak when the game had to generate a translucency table.
  (out was not being freed.)
- Stopped using Z_Malloc() for temporary compression buffers and switched
  to the libc functions. (libc has a bigger memory pool.)
- Fixed problem with skins that used sounds in the IWAD.
- Fixed a bug that could crash the game if something went amiss during
  the startup process but after setjmp() was called. Now D_ErrorLoop()
  explicitly enters the GS_FULLCONSOLE state before doing anything else.

January 16, 1999
- Added particle fountain effects with the following colors:
	red, green, blue, yellow, purple, black, and white
- Got rocket trails into a state I think looks nice.
- Improved the particle system further by making the particle sizes
  adjustable, letting particles fade out over time, and moving all of
  the particle thinking out of the renderer and into the play simulation.
- Imported some of Hexen's sound code to limit the total number of same
  sounds playing and also to allow players to make more than one noise
  at a time.
- Fixed the operation of FloorAndCeiling_(Raise/Lower)ByValue. Contrary
  to what the Hexen specs state, they do not multiply their height
  argument by 8.

January 14, 1999
- Switched to the p_sight.c of Hexen. This is benefitial for two reasons:
  1. It knows about polyobjects.
  2. It doesn't traverse the BSP tree. Yes, I know this means it's slower,
     but it also means I can use it with a portal engine, which doesn't
	 even have a BSP tree.
- Moved the locating of the polyobj spots out of PO_Init() and into
  P_SpawnMapThing().

January 12, 1999
- Added the polyobject stuff from Hexen.
- Copied Hexen's earthquake viewshifting code into R_SetupFrame().
- Changed P_Thing_Projectile() so that it can play a thing's sight sound
  and sets some other values properly.
- Added a delay to open and deferred scripts of one second after seeing
  that the Hexen code does it (and it's a good way of avoiding delays in
  open scripts to get past the screen wipe).
- Fixed a bug in P_StartScript() that would cause it to crash if someone
  tried to start a nonexistant script.

January 11, 1999
- Added an r_drawflat cvar to draw segs as flat colors instead of textures.
- In R_StoreWallRange(), changed the lighting calculation so that lines will
  have the same amount of light no matter what their orientation if a
  non-black fade is applied to them (otherwise the fog effect looks dumb).

January 10, 1999
- Added a rocket trail using the particle system.
- Added a particle system.
- Added support for PWADs like Gothic DM2 that used a hack to get sprites-in-
  a-pwad with regular Doom by making some changes to W_MergeLumps().

January 9, 1999
- Added a progress-meter to the console.
- Made a fix (submitted by John Cole) to the height-checking code so that if a
  player stands on another player, the player on the bottom doesn't get
  stuck.
- Changed P_GiveWeapon() to check if there are any graphics for a weapon. If
  there aren't, then it won't give the player the weapon. Also changed "give
  weapons" to call P_GiveWeapon() so that it won't give the player a weapon
  that doesn't exist in the current iwad (like the ssg with doom.wad).
- Fixed psprites so that the muzzleflash has the same visibility (fuzz) flags
  as the weapon sprite.
- Added the setting of YourColor when am_usecustomcolors is 0. It should have
  been there a long time ago.

January 8, 1999
- Since the new column rendering code is essentially done (unless I decide
  that it's actually worth the hassle to draw columns in bunches of 8--4 was
  enough bother), I took some timings with the new and old routines. These
  are for looking directly at a wall, the worst-case scenario for the old
  routines. I tried disabling vbl wait, but DirectDraw always seems to do it
  even when I don't tell it to, so the numbers for the low resolutions aren't
  very informative since they cap at the screen's refresh rate. Rates from
  twoBuild games under similar conditions are also given for comparison.
  This is on my PII-350:

	mode		old		new		Blood	Duke3D
	320x200		70		70		212		324
	320x240		60		60		174		274
	400x300		60		60		120		212
	480x360		60		60		91		147
	512x384		40		60		80		128
	640x400		32		64		60		96
	640x480		27		57		51		83
	800x600		27		42		34		51
	960x720		12		27		24		37
	1024x768	8		21		21		33
	1152x864	9		19		17		23
	1280x1024	6		15		12		17

  It looks like the new routines are about twice as fast as the old ones. It
  also looks like I can draw walls faster than Blood but not Duke. For
  rendering a real scene that consists of more than just a single wall, ZDoom
  beats them both, since a single wall is the best-case scenario for Build.
  Frame rates in ZDoom seems to be pretty even now, which is nice since the
  old routines were significantly slower at drawing walls than anything else.

- Put in a check in R_RenderSegLoop1() and R_RenderSegLoop2() for NULL
  walllights. Right after starting a level, it seems walllights isn't
  getting set properly, but it appears to work fine afterward. Hmm...
- Got back to school and had a chance to try the new routines on my machine
  and, wow! I can now do a steady 35 fps at 800x600. 960x720 hovers around
  27 fps. 1024x768 is around 20 fps. Not bad.

January 6, 1999
- Wrote a better assembly version of R_DrawColumnHoriz() with no partial
  register stalls and presumably no AGI stalls on regular Pentiums. If it's
  faster than the C code, it's not much faster. (At least it's not
  significantly slower, anyway.)

January 5, 1999
- Tried an assembly version of R_DrawColumnHoriz(). It was actually
  slower than the C code by about 8 fps. Probably because of all the
  partial register stalls. I guess they really can kill performance.
  Stupid Intel processors. :-)
- Continued work on the optimized column drawers so that they have
  analogues of all the regular column drawers and can also be used to
  draw sprites. On this P-II 300, 720x480 runs at a pretty consistent
  35 fps. 864x480 isn't much worse, either. (Yeah, weird modes, I know.)
  800x600 runs at about 25 fps. Not bad, considering that this is all
  C code.
- Added R_StretchColumn() and R_DrawTlatedLucentColumn() functions.

January 4, 1999
- Recompiled everything with __fastcall as the default parameter-passing
  convention. Is it better? Not sure, but the exe did shrink by 11k. I
  think the framerate may have risen by 0.5 fps, too.

January 3, 1999
- Added support for using RIFF WAVEs as sound lumps.

January 2, 1999
- Fixed EV_StopPlat() so that it doesn't get stuck looping on the first
  plat because I had forgot to advance scan inside the while loop.
- Fixed P_LineAttack() so that it can still spawn bullet puffs on the
  floor or ceiling even if the bullet path never hits a line within range.

January 1, 1999
- Worked some more with the cache optimized column drawers. Now they work
  for masked walls and skies as well as solid walls.

December 28, 1998
- Added some C code to do "interleaved column drawing" (the method that
  proved to be the fastest in my test two days ago). Wall drawing is about
  twice as fast at 1024x768. Lower resolutions show less, but still
  measurable, improvement. Hopefully converting it to assembly will
  result in a further speedup.
- Fixed problem with monsters continuing to attack their target even after
  they had killed it.
- Adjusted the minimum distance between the chasecam and a wall/floor/
  ceiling.

December 27, 1998
- Added a chasecam. Use the chase command to turn it on and off.

December 26, 1998
- Ran a simple texturing test drawing a 128-pixel tall texture into a
  1024x768 block using several different methods. The methods and
  average times for one pass of each method are:
  > drawing it directly to the buffer: 94.18 ms
  > drawing four columns into a temp array and then merging
    them into the buffer: 24.456 ms
  > interleaving four columns into a temp array and then copying them
    into the buffer as a series of longword writes: 24.338 ms
  > interleaving four columns into a temp array and then colormapping them
    as they get copied to the buffer: 21.71 ms

  using variations of the fourth method for translated columns:
  > translating during the copy to the buffer: 21.684 ms
  > translation during the mapping to the temp array: 24.29 ms

  using variations of the third and fourth method for translucent columns:
  > colormapping into the temp array: 31.75 ms
  > colormapping during the copy to the buffer: 30.42 ms

  using variations of the third and fourth method for translated,
  translucent columns:
  > translating into the temp array: 32.58 ms
  > translating during the copy to the buffer: 31.45 ms

  These tests give me an idea of what I need to do to improve the game's
  renderer.

- Added an extension to normal exit lines during translation so that if a
  map has a MAPINFO entry, then it gets translated to Teleport_NewMap
  instead of Exit_Normal. The levelnum is (tag % 1000) and position is
  (tag / 1000). Thus, you can create hubs with regular Doom maps provided
  that they have MAPINFO entries.
- The video drivers on this machine at home have a weird bug. Apparently at
  random, when the palette is changed, random colors will have their blue
  values set to the opposite of what they should be. I can't see any way to
  work around it. Ah well. It's not my machine anyway... :-)
- Fixed togglemap so that it does nothing if the player isn't in a level.
  (Could have crashed if used on the title screen.)

December 25, 1998
- Added Static_Init special (190) to handle BOOM-like control linedefs for
  setting sector properties (at the moment: color, fog, damage, and gravity)
  at level load time.

December 24, 1998
- Fixed a problem in G_CheckSpot() where a corpse would get moved vertically
  to check for collisions in a spawn spot, but then it wouldn't be restored
  to its original height after the check.
- Fixed a problem I had introduced in P_LookForPlayers(). I had been
  operating under the assumption that whenever it was called, actor->target
  was NULL. Thus, I thought that assigning actor->goal to actor->target was
  safe even if actor->goal was NULL. This isn't the case. In coop, this
  function can be called with a valid actor->target. Setting it to NULL can
  then play havoc with P_NewChaseDir(), which can get called immediately
  afterward in A_Chase(). Now it only sets actor->target to actor->goal if
  actor->target is already NULL.

December 22, 1998
- Fixed the thing spawners so that they don't spawn monsters if the
  nomonsters dmflag is set.
- Changed the imp fireball to be 75% opaque.
- Replaced the am_key?color cvars with am_lockedcolor. Finally rewrote the
  code in the automap that uses it, too. (Up until now, it was still using
  the old Doom specials to determine locked doors, even though they all get
  converted into Door_LockedRaise before the automap ever sees the line.

December 21, 1998
- Added ML_BLOCKEVERYTHING linedef flag.

December 20, 1998
- Added support for a ChangeCamera special.

December 19, 1998
- Added a fire effect to the player setup menu (which I had wanted to do
  ever since I saw Unreal).

December 15, 1998
- Went through commands.txt, and documented new commands and cvars (and also
  some that I had missed from 1.14). I still count 4 undocumented commands,
  but I can't figure out what they are even when I compare it with the output
  of the cmdlist command.
- Fixed problem with V_BreakLines() not properly setting the pixels width
  of lines that were broken.
- Fixed problem of Plat_UpByValue not going back down.

December 13, 1998
- Fixed problem of lighting in hires modes lightening too quickly.
- Added outsidefog key to MAPINFO lump parser to set the fog color for
  any sectors with sky ceilings.
- Removed the translucency on health bonuses.
- Improved some of the error-handling code in the midi playback routines,
  and the problem seems to have gone away.

December 12, 1998
- Started experiencing a strange midi problem: it works with the debug
  build but not the release.
- Added soundlist command to display the assignment of sounds.
- Added dynamic sound linking so that sounds that refer to the same lump
  use the same copy of the sound. Added the soundlinks command to view
  the linking of sounds.
- Fixed problem of punching someone to death being treated as an
  unknown means of death in the obituaries.
- Spawning players now telefrag things standing at their spawnpoint, so
  it's no longer possible to get stuck inside another player when
  spawning. Also relaxed the restriction on deathmatch starts so that
  only one is needed to start a game.
- Added nobfgaim cvar to disable freeaiming of the bfg. (suggested by
  Tony Fabris)
- Was trying to figure out why weapnext and weapprev only worked for
  player 0 in network games, when they suddenly started working.
  Hopefully it's permanent... [Now that I've thought about it a little
  more, I probably just wasn't getting the mouse captured when I alt-tabbed
  to the other player's window.]
- Rewrote weapnext and weapprev commands to use the inventory "system."
- Added a dir command.
- Added support for the second joystick device because my joystick somehow
  got assigned to it (and made me aware that it exists :-). Also added
  joy_xthreshold, joy_ythreshold, joy_xsensitivity, joy_ysensitivity, and
  joy_speedmultiplier cvars.
- Added support for double bindings (for double clicking, but it works with
  all keys, not just the mouse buttons) to C_DoKey() and some associated
  console commands.
- Changed C_DoKey() so that it takes an event as input.
- Added some code to PTR_ShootTraverse so that bullet puffs can appear on
  floors and ceilings.

December 6, 1998
- Fixed problem of monsters being slow to attack a player if they were
  on a route: Their reactiontime was too high.
- Added a gender option to the player setup menu.
- If getsfx() tries to load a sexed sound, and it doesn't exist, it will
  try to load a male version of the sound.
- Added an empty sound (dsempty).
- Changed sound handling slightly so that sounds are now loaded when
  they are first used instead of during I_InitSound(). They still stick
  around forever after that.
- Changed the names of every sound in SNDINFO. It's no longer Hexen-
  compatible, but it should at least be compatible with what I want to
  do eventually. I also redid the way skin sounds are handled to better
  fit my new sound naming conventions: Any gender/skin-specific sounds
  can be used by prefacing them with a '*' and passing a player mobj to
  a sound function. (If a player mobj is not passed, it defaults to male).
- Fixed the problem of button sounds being played in the wrong place
  when they're deactivated. For some reason, I had this line in
  P_UpdateSpecials():
		S_StartSound ((mobj_t *)&button->soundorg, "Switch1", 78);
  but button->soundorg is an mobj_t *. I'm surprised it didn't crash.
- Changed P_Thing_Spawn() and P_Thing_Projectile() so that they will only
  spawn things at map spots and not just anything with a matching tid.
- Fixed P_Thing_Projectile() so that it will still spawn missiles even if
  there is something at their spawn spot.

December 4, 1998
- Was playing a dark level and noticed that the fog isn't "thick"
  enough at higher resolutions: It transitions from darkness to fullbright
  far too quickly.
- Tweaked the falling damage some more using some code from Q2.
- Rearranged the startup sequence slightly so that I_Init() gets called
  before I_InitGraphics() (like it was before).
- Added support for gendered death messages.
- Rewrote portions of d_dehack.c so that it takes less space when compiled
  and also added .bex support. (Tried it with a few .bex files, but didn't
  do any extensive testing. Assuming it works. :-)
- Added a check in Printf() to avoid drawing to the console too rapidly
  during startup, because that can slow it down.
- Changed P_LoadSegs so that it clears a line's ML_TWOSIDED flag if an
  associated sidedef doesn't point to a back sector (otherwise the game
  could crash in p_sight.c when the line came into view).
- Removed foreign language "support." It's been broken for a while and was
  too hard to add new strings.
- Moved string names out of d_dehack.c and into dstrings.c (which is where
  they should have been in the first place.)

November 30, 1998
- Had a flash of insight for how I could speed up the rendering of walls. A
  quick test shows that filling the screen with columns of shorts is about
  twice as fast as filling it with columns of bytes. If I draw wall columns
  into memory in consecutive bytes, and then copy them to the screen in
  another pass, I should be able to combine the writing of two or more
  columns together, obtaining a speed boost that should, at the very least,
  let me maintain 35 fps at 800x600 on my machine. I'll have to try it and
  see if it actually works in practice. The overhead of writing the walls
  twice might kill any performance boost this could offer. On 486s and slow
  Pentiums, this will almost certainly be more of a hinderance than a help,
  and it's not needed at low resolutions anyway, so I plan on keeping it
  optional if it turns out to be benefitial.

November 29, 1998
- Tested a theory, and I was right. :-( Drawing vertical columns is
  inherantly slower than drawing horizontal spans, probably because drawing
  them vertically results in a whole lot more cache misses. What I did to
  test it was replace most of D_Display() with a loop that filled the screen
  a solid color. At 800x600, filling the screen by columns was no faster than
  if I textured the walls (23 fps). Filling by rows, I could get 35 fps.
  Apparently, any further optimizations in the renderer will have to focus
  on drawing walls by rows instead of colums.

November 28, 1998
- Did some slight performance tuning in R_RenderSegLoop() by making more
  variables local to only certain blocks in the function. In 800x600,
  looking straight at a wall now gives ~23 fps vs ~20 fps before. (I really
  wasn't expecting such a marked improvement. It might be worthwhile to try
  and tweak this in assembly.)
- Pulled some blending addition code from the Q2 DLL. I had been trying to
  do the same thing myself, but couldn't quite manage it until I found
  id's code.

November 26, 1998
- Added support for cancelling messagemode by pressing escape.
- On the automap, a player with invulnerability is drawn with a color
  slightly off from the background rather than being hard-coded to palette
  entry 246 (which is almost black with the normal Doom palette).
- Finally got around to working out the bugs in teamplay. (Missiles would
  still hurt you even with friendly fire on.)
- Disabled intermission texts in deathmatch.
- Pretty sure I got a non-fatal version of I_Error working now. It uses
  setjmp() and longjmp() to do its magic.
- Removed the check for -statcopy in d_main.c.
- Removed the system menu from the ZDoom window. Unfortunately, this also
  means it doesn't get a minimize box. Oh well.
- Removed the restriction on using messagemode only during a netgame.
- Added mouse wheel support. Under Win95, it ought to work with DirectInput.
  Under NT 4.0 and 98, it should always works.

November 23, 1998
- Changed the startup code so that the graphics mode is initialized as early
  as possible, allowing us to use the in-game console for most startup text.
- Moved all the functionality of I_StartGraphics() into I_InitGraphics()
  because the game starts up in a fullscreen console now.
- Added endgame to quit out of a game and drop to the fullscreen console.
- Removed the ormask parameter from V_PrintStr() and V_PrintStr2(). It was
  almost never used, and in those cases where it was, it was easy enough to
  just or the string beforehand.
- Adjusted the colors of the CONCHARS lumps and changed a few special
  characters. With the fullscreen console, it was obvious that they were
  all too dark.
- Added a fullscreen console.
- Changed handling of WM_DESTROY messages in i_input.c to call exit()
  directly, because the WM_QUIT message didn't seem to be making its way
  into the message stream.
- Removed some unused #defines from doomdef.h
- Removed the store demo check from D_ProcessEvents().

November 22, 1998
- Fixed saving of monster goals (was referencing the tracer field instead).
- Made one-sided lines pushable.
- Made P_PushSpecialLine aware of the side of the line that was pushed.
- Moved the execution of deferred scripts out of P_StartOpenScripts so
  that going to a level with a saved snapshot would not terminate the
  script prematurely when the snapshot was loaded.

November 21, 1998
- Teleport_EndGame and Teleport_NewMap no longer execute if crossed
  along a linedef's back side.
- Discovered I had missed implementing Teleport_EndGame, so I added it.
- Fixed problem with level snapshots where plats and ceilings that were
  in stasis were saved incorrectly.

November 15, 1998
- Just tried listening to D_RUNNIN after a clean boot, and it didn't work
  the first time. :-( At least it plays properly after I use iwinit now...

November 14, 1998
- Bumped the height of the three small torches up from 34 to 37 units so
  that the player can't jump on top of them.
- Tweaked the thing auto step up in PIT_CheckThing some more so that it
  will only do the auto step up if you're not in the air. It seemed funny
  to be able to jump on top of most monsters. Never mind. I can't seem to
  get it to work only when I'm not jumping. :-(
- Added code to mus2strm.c so that it generates a tempo event at the
  beginning of the song. (The tempo used appears to be the default for
  midiStreamOpen, but I felt like being safe anyway.) AddEventToStream() in
  mid2strm.c also keeps track of all instruments used in a song now. This
  way I can get around what appears to be a bug in the GUS PnP drivers
  that would cause it not to play some instruments if they weren't already
  loaded in the card's RAM. Just before I start playing the actual song, I
  play each instrument very briefly and very quietly to get the instruments
  into the card's RAM.

November 2, 1998
- Added snd_mididevice cvar to allow the user to select which MIDI device
  to use and a snd_listmididevices cvar to enumerate the available devices.
- Added MIDI volume cvar snd_midivolume and a corresponding menu item.
- Finished mus2strm.c and made a few cleanups to the MIDI streaming code.
  Now I just need to switch to MikMod, and I won't have to use temporary
  files anywhere. (MIDAS can only load MODs from disk and not from memory.)

November 1, 1998
- Started cleaning up qmus2mid.c and transforming it into mus2strm.c.

October 31, 1998
- Took the mid2strm sample from the dx5sdk and used it to redo my MIDI
  support so that I can use the MIDI stream API now, the primary benefit
  being that it lets me set the MIDI volume for just that stream and not the
  entire system.
- Changed I_DetectOS() so that it doesn't identify Windows 98 as Windows 95.

October 24, 1998
- Discovered the blockmap generation wasn't actually working. Can't figure
  out why, since the same code works just fine in BOOM...
- Incorporated several of the changes from BOOM 2.02 such as "loose files",
  fire trail elimination, and automatic blockmap generation for large maps.

October 17, 1998
- Implemented the Radius_Quake line special.
- Removed limit on the size of recordable demos.
- Changed P_SpawnPlayer() so that it always spawns players on the ground.
- Created an MT_TELEPORTMAN2 that can be used to teleport things to points
  above the ground and fixed MT_TELEPORTMAN so that it teleports things onto
  the ground.
- Updated the teleport code so that it finds destinations using P_FindGoal()
  instead of searching through all the active thinkers.
- Fixed a memory allocation problem with the -iwad parameter.

October 16, 1998
- Rewrote IdentifyVersion() so that it identifies IWADs by their contents
  instead of their names. (except for tnt.wad and plutonia.wad, since I
  don't know of any other way to distinguish them from doom2.wad)
- Doors that needed yellow skull keys to be opened said they needed yellow
  cards instead. Fixed.
- Finally added proper support for substituting translucency for the fuzz
  effect. Instead of using a NULL colormap to represent fuzz, it takes
  advantage of the vissprite's flags field and sets MF_SHADOW. Then the
  colormap points to the colormap that would be used if the sprite wasn't
  shadow, so that it can be properly shaded when r_drawfuzz is 0.
- Got the colormaps code working. I just wasn't allocating enough space for
  the realcolormaps array. Oopsy.

October 15, 1998
- Decided to support changing of colormaps via Boom's 242 linedef after all
  instead of just changing the blend, so I started adding some code to
  support that. Unfortunately, now it doesn't work without any C_START/C_END
  colormaps. :-( Will fix tomorrow.

October 14, 1998
- Added a callback for the splashfactor cvar that prevents it from being
  set to illegal non-positive values and also computes the inverse of the
  cvar for scaling of the thrust felt by things that chew on their own
  missiles. That way, a player will always rocket jump the same height no
  matter what their splashfactor is set to.
- Fixed a problem with continuous sounds that prevented them from being
  played. When I had consolidated to using a single mobj thinker for all
  sounds instead of splitting them up as I had previously, I was erroneously
  setting the activation time for continuous sounds to 0 because I wanted
  their thinkers to get called right away. But the mobj thinker decrements
  the tic counter and *then* compares it with 0, so it would decrement the
  0, see -1, and then never doing anything with that mobj again.

October 10, 1998
- The button list gets saved in level snapshots now.
- Added full support for activation types of projectile cross, projectile
  hit, and push. Also added support for a few linedef types to be
  monster-activatable depending on their activation type even if
  ML_MONSTERSCANACTIVATE is not set. (So that, e.g. a monster can still
  open a local door of type Door_Raise without the level designer
  having to do anything special.)
- Removed the MAXBUTTONS limit and also fixed a problem with the sound
  origin used when activating switches/buttons.
- Changed the error messages in V_DrawWrapper() and V_DrawSWrapper() to
  use DPrintf() instead of Printf().
- Fixed problem with invulnerability I introduced yesterday. (Walls were
  still being drawn with the normal colormap.)

October 9, 1998
- Spent about an hour changing the rendering code so that each sector can
  have its own colormap. The light tables are now indices into a colormap
  rather than pointers into one. Spent about half an hour afterward
  figuring out why it seemed to be merging visplanes that were alike in
  everyway except for colormap. All in all, it was easier than I had
  expected. Unfortunately, it's also too slow to build a colormap in the
  middle of gameplay, so I guess an open script will have to be used to
  build any colormaps before the level starts if anyone wants to change a
  sector's color on the fly.

Ocober 8, 1998
- I had earlier changed PIT_RadiusAttack() to do only half damage to targets
  that originated the explosion, so that rocket jumping didn't hurt so much.
  The scale factor has now been moved into the cvar splashfactor and
  defaults to 1.0. The former behavior can be restored by setting it to 0.5.

October 5, 1998
- Spent about 15 minutes writing a routine to build a colormap for non-
  white lights. Tested it using an orange light for the entire level. It
  worked nicely, so now I just need to make it possible to set the light
  color on a sector-by-sector basis.
- Issue: Teleport destinations need to be flush with the floor instead of
  remembering the position they are spawned at. Discovered this while
  playing MAP20. A teleport destination lowers a great distance the first
  time you land on it. Going on it again will teleport you to its original
  height, and you fall from there. Maybe another type for destinations that
  remember their height, then?

October 4, 1998
- Added say_team and messagemode2 commands and team and teamplay cvars.
- Externalized the obituary messages and added a "Strings" section to the
  dehacked code. Since I'm pretty sure I'll be switching to scripted code
  ala Quake, this is only temporary (along with everything else dehacked).
- Added support for showing both skull and card keys in the status bar
  ala Boom.
- Added Sector_SetDamage and Sector_SetGravity line specials.
- Added another mobj flag (MF2_NOADJUST) so that you can walk on floating
  bridges without worrying about them getting bumped up above your head.
- Adjused PIT_CheckThing() so that it allows stepping up on top of things
  if their tops are no more than 24 units above the thing moving.

October 3, 1998
- Added an MT_AMBIENT mobj (doomed #14065). Its first argument determines
  which ambient sound it represents. (And is valid in the range 0-255.) It
  also subsumes the earlier MT_AMBIENT0 - MT_AMBIENT63 mobjs (doomed
  #14001 - 14064), and P_SpawnMapThing translates them into an
  instance of MT_AMBIENT. Also merged the world ambient thinker into the
  mobj thinker so that all ambient sounds are controlled with a single
  thinker function and not two.
- Removed sounds.h. Everything necessary to use sounds is now found in
  s_sound.h
- Disabled the recognition of any display modes other than INDEX8 in
  i_video.cpp. I'm no longer sure high/true color is such a good thing.
  Without a major loss of performance, I can't see any way to avoid a
  huge memory loss with more than a few palettes in those modes. :-(
- Did some work with ARGB8888 modes: I_Blit can now blit from INDEX8 to
  ARGB8888 surfaces. The console font now gets drawn on ARGB8888 surfaces
  (pretty sure it was before, but it stopped working sometime).
- Fixed the cast drawer so that the names don't get squashed together in
  resolutions at least 640 pixels wide.
- Fixed bug where pressing a key with a menu active would move the cursor
  to a blank line if it wasn't assigned as a hotkey.
- Added support for actually seeing skins as well as setting them in the
  player setup menu.
- Fixed bug with player colors for players 5-8.

October 1, 1998
- Continued work with "skins." Everything works now except actually
  seeing them.
- Did away with the spriteoffset[], spritewidth[], and spritetopoffset[]
  arrays and moved their contents into the sprite frame structure.

September 30, 1998
- Started work on supporting Doom Legacy "skins." (Personally, I think
  skin is a misnomer, but I'm afraid the term's probably here to stay.)
- Removed the maskdraw_t structure from r_things.c since it wasn't used
  anywhere. Here it is preserved for history:
	typedef struct {
		int x1, x2;
		int column;
		int topclip, bottomclip;
	} maskdraw_t;
  Wonder what it was for.

September 27, 1998
- Fixed long-standing bug in R_DrawSprite that could cause sprites to be
  drawn through the floor of a cliff if you look down just the right amount
  (when the top edge of the floor is exactly two pixels above the top of
  the screen).
- Added hacked-in support for colormaps with the Transfer_LightsHeights
  special. ZDoom actually sets the blending through this special instead
  of changing the colormap. To accomodate BOOM levels that use colormaps,
  it will average all the colors in the colormap together and derive a
  blend from that. Alternatively, you set the blend directly by setting
  the appropriate texture name to a hex string of the format AARRGGBB.
- Fixed barrels (again) so that barrel traps work as expected. Not sure if
  this problem existed in 1.14a or not, but it's gone now.
- Added ignoreInvisibility parameter to P_CheckSight(), because it is
  occasionally used to determine if there is an unblocked line between two
  things (not if one can see the other).
- Switched to using a logarithmic scale for pain flashes.
- Added support for Boom's push/pullers, wind, current, and friction effects.

September 26, 1998
- Saw this at the Team TNT message board:

      the bug has been found and fixed. What was happening was that the fake
	  sector was being passed instead of the real one, and this messed up
	  the check for whether a sector had had its sprites added to the view
	  already. As a result each sprite generated was being added once per
	  subsector rather than just once.

  So I went looking around in the code some and found this in R_Subsector():
  "R_AddSprites (frontsector)". I replaced frontsector with sub->sector, and
  that seems to have done the trick. A test level I made went from 15 fps to
  35 fps (the max) with this fix.

September 23, 1998
- Using -cdrom creates the directory if it doesn't exist (like it used to).
- When used with -cdrom, screenshots now get saved to C:\ZDOOMDAT instead of
  the game directory.
- Put back support for taking screenshots by pressing F1 with -devparm
  active, since some people probably won't read the docs and realize there's
  a screenshot command bound to the "Print Screen" key by default.
- Added "ticker" cvar to control display of the -devparm ticker at the
  bottom of the display (so that -devparm is now totally useless).
- Changed the directory for -cdrom from C:\DOOMDATA to C:\ZDOOMDAT and added
  support for using that directory to store zdoom.cfg.
- Fixed bug that caused using -devparm or -cdrom to crash the game during
  startup. (They referenced the Strings[] table before it was fully
  initialized.)

September 19, 1998
- Turned off screenwiping when moving between levels in a hub (but only if
  the level the player just left has LEVEL_NOINTERMISSION set).
- Fixed a savegame bug I had added with hubs that caused the game to
  forget the player's state.
- Added noise cvar to control display of sound debugging info.
- Added turn180 command to quickly turn the player around.
- Added support for the ACS thingsound(), sectorsound(), and ambientsound()
  commands.
- Changed every reference to S_StartSound so that they refer to sounds
  by name rather than id and specify priority information (since it's
  no longer a part of the sfxinfo).

September 18, 1998
- Finished S_ParseSndInfo so that it has no maximum number of sounds it
  can define and works with more than just ambient sounds.
- Changed w_wad.c back to using the buffered I/O functions again. (I had
  done this a long time ago, but thanks to some mistakes on my part, I
  ended up putting taking it out. Now it's back for good. :-) It doesn't
  seem to have any effect on disk performance, but it will let me use
  MikMod functions to load samples and MODs directly from the wad.
- Played around with MikMod some. With the assembly mixer, its
  performance seems to be about the same as MIDAS', so I will
  probably switch to it at some point.

September 17, 1998
- Improved support for analog joysticks by using their full range of
  motion instead of treating them like digital devices.

September 15, 1998
- Added support for world vars and controlling scripts on other maps.
- Added the hub clusterdef flag and supporting code.
- Figured out what the problem with hub savegames was: Instead
  of writing out a copy of the snapshots for each level with one,
  I wrote out a copy of the current level's snapshot for each
  level with a snapshot. Whoops! Easy fix.

September 14, 1998
- Worked with supporting hubs. For maps that belong to a hub,
  whenever you exit the level, the game makes a mini-savegame
  of the level. When you return, the world state is based on
  the mini-savegame. Theoretically, saving games to disk should
  be as simple as storing each of these "snapshots" along with
  some extra info, but I couldn't get it to work. The current
  level worked, but trying to go to a previously visited level
  after loading the savegame crashed the game.

September 13, 1998
- Redid my ACS code a bit so that scripts are now kept track of
  through a private linked list rather than thinkers. The only
  real advantage this offers is that I have complete control
  over when scripts get executed, so a script that executes a
  scriptwait command will be guaranteed to run in the same tic
  that the script it's waiting on terminates.

September 12, 1998
- Replaced my visplanes code with Lee Killough's hashing method
  and got a noticable performance boost in high visplane areas
  (even those with <128!).

September 4, 1998
- Added weapnext and weapprev commands courtesy of
  Papst Johannes Jrg IV. [which were later completely
  rewritten by me]
- Add support for suspending and resuming scripts (easy when
  you know you can only have one copy running at a time).
- Added checks to ensure that only one instance of a script is
  running at a time (like Hexen).

September 3, 1998
- Took out the stuff for sliding doors. You want it, then
  fake it with a script.
- Ran around in hexen.wad for a while and fixed a few bugs.
- Added support for ACS scripts (except for the sound p-codes
  and polywait).

September 2, 1998
- Added support for monsters remembering their previous target
  from BOOM.
- Made the mobj's targettic a counter that decrements to zero
  instead of a time relative to gametic (so that it works properly
  across savegames).
- Added more mobj flags bits and consolidated invisible into it.
- Implemented all the Thing_* line specials.
- Added support for stairs that reset and/or have delays and the
  sync stair builders.

September 1, 1998
- Fixed problem with several plat types that didn't deactivate
  themselves.
- Fixed bug that caused Plat_UpWaitDownStay to act like
  Plat_PerpetualRaise.
- Made NOINTERMISSION levels work by moving the check for it later
  in G_DoCompleted().
- Added HealThing special to match DamageThing.
- Added full support for the Teleport_NewMap special. Levelnum is
  actually used for something in the MAPINFO now, too.

August 31, 1998
- Implemented Hexen's thing specials that don't use tids.

August 30, 1998
- Added support for Hexen pillars.
- Finished ceilings.
- Finished floors.
- Added compression of .tch files and significantly rewrote the
  associated part of v_video.c in the process. Not quite the savings
  I would have liked: only about 57%.
- Tried using the LZ(77?) code from the Doom utilities to compress save
  games, but it was too slow to be practical. I now use minilzo which
  seems to compress about the same but is a *lot* faster. As an example
  of the kind of savings this offers, the size of a savegame on one
  level shrank to 20% of its original size.
- Used BOOM's code to remove the savegame size limit and fix some other
  savegame bugs.
- Used Killough's global boss brain state.
- Tweaked I_FatalError() so that if something really bad happens, you
  shouldn't end up in an infinite recursion sequence because Printf()
  gets called somewhere during the exit sequence.
- Implemented Floor_Waggle. Unfortunately, it's not the same as Hexen's
  since I couldn't find any decent documentation about it and also had
  a hard time determining just how every different parameter affected it
  by watching it in a test level. It's close, but not the same.

August 29, 1998
- Added support for normal (not sync) Hexen stairs.
- Added support for Hexen's phased lighting.

August 26, 1998
- Continued on floors.

August 25, 1998
- Started getting moving floors working again.

August 21, 1998
- Got plats working again.
- Switched to using a linked list to keep track of active ceilings and
  plats. This is similar to the way BOOM does it, except I store the
  list pointers in the active entities themselves rather than seperately.

August 20, 1998
- Fixed a savegame bug I had introduced. They got saved as "version 115"
  instead of zdoomsv?.dsg.

August 8, 1998 - August 15, 1998
- Did some work converting to Hexen-like line specials. Sorry, I was too
  lazy to record the specific changes.

August 7, 1998
- Incorporated BOOM's Pain Elemental Lost Soul shooting fix.
- Incorporated some of BOOM's changes to p_map.c.
- Incorporated Killough's changes to p_sight.c.

August 6, 1998
- Added snd_surround cvar to control use of surround sounds. If "0", then
  anything that would otherwise have been played surround is played
  identically from both speakers instead.
- Added cvar_defflags variable to hold any flags automatically applied to
  new cvars, the intended purpose being to allow all cvars in a config
  file to be flagged as CVAR_ARCHIVE. Useful if one port of ZDoom has cvars
  that another doesn't, but you still want them to share the same config
  file.

August 5, 1998
- Finished keyboard handler and tried to create a mouse handler for the
  DOS port.
- Switched to using PTC Mode IDs to describe video modes instead of
  bpp since the DOS version of PTC has multiple modes with the same bpp.

August 4, 1998
- Created partial keyboard handler for DOS port.

July 28, 1998
- Fixed use of config files in paths containing spaces. (I had forgotten to
  enclose the pathname in quotes when constructing the exec command string.)
- Added calls to FixPathSeperator() in a bunch of places where it was needed.

July 27, 1998
- Uploaded a quick fix to 1.14a that lets it load save games again.
- Renamed the project and workspace to zdoom (rather than doom).
- Created a version info resource for ZDoom and moved the system-specific
  files into a new win32 directory in the code tree.

July 26, 1998
- Uploaded 1.14a to notgod.com along with a source patch for 1.14->1.14a.
- If FONTA?? is available, it is now used in deference to STCFN??? (i.e.
  -file heretic)
- Renamed all the WICHAR?? in zdoom.wad to FONTB?? to match the naming
  convention used by Heretic and Hexen.

July 23, 1998
- I must be an idiot! I took a fix from BOOM for freeing the lnames array too
  soon and stuck it into ZDoom without really thinking about it. In BOOM (and
  DOOM) lnames[] is dynamically allocated. In ZDoom, it's static since it
  only needs to contain two items (the patch of the level just left and the
  patch of the level being entered). Fixed.
- Using the changemap command no longer says you are leaving the map you're
  entering when no title patch is provided. (Unless they're one and the same.)

July 22, 1998
- Added a z parameter to P_TeleportMove() to properly handle checks in the
  third dimension. Previously, I was checking for this, too, but against the
  thing's original position. Now I check against the desired z location. This
  prevents monsters from teleporting inside of each other.

July 19, 1998
- Improved handling of international keymaps (such as the French one) by
  moving all responsibility for determining the shifted state of keys into
  i_input.c. C_consol.c no longer maintains a ShiftLOT since .data3 of the
  key event will contain a character that is sensitive of the current state
  of modifier keys. (i.e. .data3 contains 'a' when the A key is pressed and
  'A' when SHIFT-A is pressed.)
- Made some changes to D_DoAdvanceDemo() and G_CheckDemoStatus() so that
  using the player setup menu during demo playback is now safe.
- Added a check to C_BackupCVars() so that it doesn't back up CVAR_LATCH
  cvars are not saved. This is unnecessary since they don't actually
  change until a new game anyway. The primary advantage of this is that
  starting a new game during demo playback now uses the selected skill
  level (again).
- Anything spawned by a boss shooter will now always telefrag even if
  LEVEL_MONSTERSTELEFRAG is not set.
- Modifed PIT_RadiusAttack() (again) so that when a barrel is doing the
  exploding, the original damage code is used.
- Removed the bitwise and against 0xff for angle in R_DrawSky() and
  R_DrawMaskedSky(). Some skies in various PWADs are wider than this, and
  R_GetColumn() masks it to the proper width for us anyway.

July 18, 1998
- Changed the unknown thing to have no gravity so that it stays at the
  height it was spawned at (useful with Hexen).
- Discovered the source of a memory leak: When I added the thing_list code
  from BOOM, I left out some from P_UnsetThingPosition(), so
  P_SetThingPosition() was always creating a new thing_list and letting the
  old one waste space. Conveyors even work now! Yay!
- Removed support for repeating the left and right arrow keys in m_menu.c
  since some people had trouble with it.
- Changed D_DoServerInfoChange() so that it doesn't print messages in
  single player games.

July 16, 1998
- Added entries for Heretic to SWITCHES and ANIMATED lumps (because I can).
- Did equivalent things for BOOM SWITCHES lumps.
- Removed MAXANIMS limit by scanning through the AnimDefs array to find out
  how many entries it contains and then allocating that many anim_t's. Also
  added support for BOOM ANIMATED lumps.
- Reduced the Revenant's height from 80 back to 56 to fix a problem with a
  trap on DOOM2 MAP27. The new height caused the revenants heads to get
  stuck in the ceiling, so the platforms they were on wouldn't lower. Since
  there are probably other situations like this elsewhere, I went and gave
  all the monsters their original heights back.
- Fixed a problem with BOOM's openings limit removal. Pointers to openings
  get stored in drawsegs, and the realloc() of the openings didn't bother
  to adjust those pointers. A simple fix in r_segs.c once I figured out what
  the problem was.
- Incorporated BOOM's Medusa fix.

July 15, 1998
- Added Lee Killough's generalized scrollers from BOOM.
- Added Rand Phares' thing list stuff from BOOM.
- Finished support for BOOM's multiple sector thinkers and threw in the
  elevator code in the process (but nothing that calls it).

July 14, 1998
- Started adding support for BOOM's multiple actions per sector.
- Uploaded the 1.14 binaries and source to notgod.com.
- Fixed bug that caused the bunny scroller to crash: Using 0 instead of
  &screens[0] in the calls to F_DrawPatchCol().
- Added support for the ML_PASSUSE flag from BOOM.
- Decided using a default texture for unknowns was too complicated to bother
  with at this point, so I took it back out. (Left in for flats, though.)

July 13, 1998
- Fixed IDKFA cheat to give the correct amount of armor.
- Slightly updated and reformated editing.txt and updated it to use
  the new ambient thing numbers.
- Reformatted and updated zdoom.txt.
- Created red and blue checkerboards that get substituted for unknown textures
  and flats.

July 12, 1998
- Created a new thing that gets substituted for unknown things in a map and
  things that are known but have no sprite frames (such as Doom II monsters
  using a DOOM I IWAD).
- Kill and kill monsters commands now get sent over the network.
- Reformatted commands.txt to make it fit on a 76-column display and hopefully
  be more readable.

July 11, 1998
- Renumbered the ambient things to the range 14001-14064.

July 10, 1998
- Renamed -nosound to -nosfx to be more compatible with most other Dooms.
- Adjusted the autoaim values used by the player setup menu to not use
  such a large range (0-5000 with big steppings in-between).
- During another deathmatch session, discovered a problem on MAP03 with
  spawn farthest. No matter what, the dead player would always spawn at
  the spawn spot near the beginning of the level. Realized that deathmatch
  spawn spots weren't recorded as 16.16 fixed point, so I adjusted
  PlayersRangeFromSpot accordingly.
- Was playing around in a deathmatch a little when I tried the changemap
  command and the game bombed out in Z_Free() because the block being freed
  didn't have a ZONEID. So I added a wrapper around Z_Free() to pass it
  the source file and line number of the caller in case this happens again.
- Discovered that I had forgotten to add the server var sending/reading
  to the netgame arbitration process, so I added it.
- Added changemap command which should be able to change the level during
  netgames and demos.
- Added support for cheat network commands so that they can work in netgames
  and demos (if desired).
- Added hack to DeHackEd support to use the original Doom thing height's
  if the thing hangs from the ceiling but the patch doesn't set its height.

July 9, 1998
- Improved wi_stuff.c so that it can still draw the level name even if a
  patch hasn't been designed for it.

July 8, 1998
- Fixed aiming. This consisted of two things: First, I needed to change
  the way I generated yslopetab and looked into it so that fullscreen
  windows and non-fullscreen had the same relative range. (Side effect:
  When the status bar is visible, you get a larger freelook range than
  before.) Second, I had to adjust my calculation of view pitch->slope
  from 0.5 to 0.75 times. I arrived at this value by standing on a cliff
  and firing a rocket launcher with different multipliers until I found one
  that looked good.
- Fixed sky scaling with different r_detail settings.
- Fixed spacing of the ammo count numbers on the fullscreen HUD.
- Hacked around in i_video.cpp and PTC's idirectx.cpp a little to support
  Mode X modes under Windows 95.
- Changed C_Drawer() so that it doesn't call C_EraseLines() if the automap
  is active, since it just creates junk on top of the automap.
- Changed the notify text drawer to use Doom's standard red text instead
  of white.

July 7, 1998
- Made several changes to the code to make it more portable and removed
  a few unused variables. DJGPP can now compile the machine-independant
  parts with only minimal warnings with -Wall.
- Thank's to gcc's -Wall, I figured out why togglemessages didn't
  work: I had left out the parentheses in Cmd_ToggleMessages
  when I wanted to call M_ChangeMessages(). Oops.
- Tried compiling r_draw.c with DJGPP and discovered that it doesn't
  like long file names, so I renamed everything to fit the 8.3 format.
  (Stupid MS-DOS! Grr!)
- Changed the midprinter to use the hu_font instead of the console font
  since it looks better and also means that the "You need a * key..."
  messages don't need special treatment in the DeHackEd code.
- Changed C_AddNotifyString() to use V_BreakLines().

July 6, 1993
- Created V_BreakLines() and V_FreeBrokenLines() to handle splitting of
  text into multiple lines. Unlike the code I had in C_AddNotifyString(),
  these will properly break lines at whitespace if possible instead of
  the middle of a word.
- Stopped using the pitch field of the S_sfx table to store the sounds'
  playback frequencies so that I can handle pitched sounds properly ala
  some magic I found in BOOM.

July 3, 1998
- Went ahead and took some code from BOOM for "kill monsters" command
  since it also kills losts souls spawned by a pain elemntal's death.
- Used BOOM's P_SetMobjState() since it has nifty state cycle detection.
- Removed a lot of stuff from cmdlib.c that I didn't actually use. (Kept
  the CRC code around since I *might* use it.)
- Discovered that taking screenshots directly inside the screenshot command
  was a bad thing because it can be called during the middle of a screen
  draw. Fixed to delay using ga_screenshot.
- Changed the gamma command into a cvar and removed the code for
  "floaters" from the options menu, since that was all they were used for.
- Fixed bug in alias code: New aliases would not properly clear the
  next field if they were the first one in a bucket.
- Aliases now get saved to the config file.
- Added "Always Mouselook" to the Options menu. I thought it was already
  there, but... It wasn't.

July 2, 1998
- Added autoexec cvar to determine the autoexec file (partially because
  Doom Legacy decided they wanted to use autoexec.cfg--just like they
  used config.cfg).
- Renamed menu_video to menu_display and added menu_video, menu_player,
  and menu_gameplay commmands.
- Moved I_WaitVBL() into i_system.c and changed it to make a simple Sleep()
  call because that's what it's really used for.
- Changed C_DrawNotifyText() to not draw when the menu is up.
- Added proper support for usejoystick and usemouse cvars in i_input.c
- Cleaned up the Convert() table in i_input.c by reformatting it.

July 1, 1998
- Tweaked PIT_RadiusAttack() to be more realistic.
- Fixed PCX writing code so that it properly indicates that the image is in
  color.

June 30, 1998
- Added Gameplay Options menu for setting dmflags.

June 29, 1998
- Documented the map command. (How did I miss this?)
- Changed the map command so that it doesn't die fatally if the specified lump
  doesn't exist.
- Borrowed some of NTDOOM's mouse input code (using Win32 functions instead of
  DirectInput), and the mouse seems smoother under NT. Use the in_mouse cvar
  to select which method of input to use.
- Added I_DetectOS() function and in_mouse cvar.

June 27, 1998
- Added DF_NO_JUMP and DF_NO_FREELOOK dmflags.
- Made -turbo parameter a normal cvar.

June 26, 1998
- Spent most of the day trying to beat MineSweeper at expert difficulty.
  Sorry. :-)

June 25, 1998
- Implemented fraglimit and timelimit cvars.
- deathmatch is also a cvar now.
- Added q2-like dmflags cvar. It adds some new deathmatch options and also
  takes over the duties of the g_falldamage and g_unlimitedammo cvars as well
  as the -fast, -respawn, and -nomonsters.
- Added one second delay until respawning after death is allowed (so that when
  noexit is active, and you hit an exit switch, you don't instantly respawn).

June 24, 1998
- Changes to serverinfo cvars now get transmitted properly in netgames, and
  only the key player can change them.
- Finally added cvarlist command and removed the multiple variations of "set".
- Added support for 8 players. Using more should now be as simple as increasing
  the MAXPLAYERS #define.
- Created brighter faceback graphics that better represent the player's
  chosen color.

June 23, 1998
- Added spynext and spyprev commands. Spynext is equivalent to pressing F12
  in the original Doom.
- Added +showscores action. It gets bound to \ by default.
- Save games now hold copies of every serverinfo cvar and the level locals.
  With Doom 1, they also contain a list of visited levels.
- The game now keeps a cumulative frag count for each player which is the same
  as what gets displayed on the status bar during a deathmatch.
- Removed "Next Weapon" from the controls menu. I need to get the inventory
  system working before I can implement it, and I don't feel like doing that
  right now.
- With a little help from BOOM, sounds in spy mode now center around the
  displayplayer rather than the consoleplayer.

June 22, 1998
- Got dynamic player translation tables up-and-running. Status bar also uses
  the translation table for the faceback instead of different patches. Automap
  now uses the player's chosen color in netgames instead of a fixed array
  of color values.
- Left and right arrow keys now repeat in the menus (for sliders).
- Continued work on player setup menu.
- Fixed C_AddNotifyString() so that it doesn't crash if passed a string with
  a newline in the middle but not at the end of the string.
- m_menu.c's text input routine now uses the user's preferred keymap.

June 20, 1998
- Continued work on player setup menu.
- Fixed a bug in V_Clear(): 8-bit modes ignored left parameter.
- Upped number of savegame slots to 8.
- Removed all alloca() calls by replacing them with Z_Malloc()/Z_Free() pairs.

June 19, 1998
- Compiled with warning level 4 and caught a few problems and potential
  problems as well as some code that was never executed. (Thanks, Grant.)
- Fixed uppercopy so that it doesn't always copy 8-chars even if the passed
  string is shorter.
- Removed <windows.h>, <io.h>, <direct.h>, and <errno.h>
  #includes from d_main.c.

June 18, 1998
- Removed R_OK #define from one of the source files and changed the typedef
  for BOOL in doomtype.h. Also created dxcrap.c which holds some information
  from dinput.lib and dxguid.lib since Microsoft seems to have left most of
  the Watcom DX libraries out of its DX 5 SDK.
- Started work on player setup menu.

June 17, 1998
- Got GNU diff and patch to compile under Win32. I intend to use them to
  distribute my changes to the PTC source along with the rest of the ZDoom
  source.

June 13, 1998
- Fixed a shutdown bug in the new sound code.

June 12, 1998
- Changed i_sound.c to something inspired by BOOM. It now uses MIDAS's
  auto effect channels instead of a bunch of junk left over from the
  Linux port to determine which channel to play a sound on. As a result,
  it doesn't seem to lose the player's weapon fire anymore. (Yay!)
  Also, the snd_channels cvar is now useful.
- Made spawning of unknown things in maps a warning instead of an error.
- Changed R_CheckTextureNumForName() around to use a hash table
  instead of a linear search.

June 11, 1998
- Added support for BOOM's -fastdemo parameter.
- Made MIDAS initialization failure a non-fatal error.
- Did a small change to R_InitSpriteDefs() so that it scans the list of
  sprites backwards.
- Rewrote R_PrecacheLevel() based on BOOM's.
- Found a better way to trap Alt-Space: I listen for WM_SYSCOMMAND messages
  and filter out any for SC_KEYMENU events.

June 10, 1998
- Removed Martin Howe's sprite rotation fix in R_InstallSpriteLump()
  and replaced it with something from BOOM.
- Discovered the Win32 function RegisterHotKey() and used it to trap
  Alt-Space so that it doesn't open the window's system menu. Alas,
  it doesn't seem to work with DirectDraw. :-(
- Added RGB->HSV and HSV->RGB functions to v_palette.c.

June 9, 1998
- Removed WS_POPUP style from the ZDoom window.
- Integrated the changes in PTC 0.73b with mine, and PTC stopped working
  with DirectX (again). Thankfully, I managed to get it working again.
  (Sometimes I wonder if using PTC is more trouble than it's worth...)

June 8, 1998
- Each machine now broadcasts its userinfo in D_ArbitrateNetStart() ala
  Doom Legacy 1.11.
- Userinfo settings are now properly set at game startup.
- Modified D_ArbitrateNetStart() to use the stream reading and writing
  functions for setting and retrieving some game info.
- Changed the global var startmap to be the actual name of the desired map
  and got rid of startepisode global var.
- Chat messages now get sent using special "ticcmds" instead of char-by-char
  in a normal ticcmd.
- Layed the foundation for special network commands besides user movement.
- Pressing escape in a menu now backs up one menu instead exiting the menu
  system entirely. (And backspace is now used to clear key bindings in the
  configure controls menu.)
- Menu now displays messages that don't expect any specific input without
  quickly hiding them away.
- Changed some stuff so that ZDoom doesn't grab the mouse when a menu is
  active and it's running in a window.
- Added some code so that during a demo, if a key is bound to toggleconsole,
  menu_*, sizeup, or sizedown, it will execute that command instead of
  activate the menu.
- Removed F1 screenshot hack from m_menu.c. (Use screenshot command.)
- Removed support for picking menu items with the joystick and mouse.
- Integrated the changes in PTC 0.73a with my own.

June 6, 1998
- Added -config option in GetConfigPath().
- Added messagemode and say console commands.
- Fixed C_AddNotifyString() so that it breaks lines without losing characters.
- Changed chat code to use whatever the user's selected keymap is instead of
  always Qwerty. Did the same for the console.
- Made it possible to actually send chat messages.
- Added check for chat_on to C_DoKey() so that we don't try to do something
  while the player is typing a message.
- Removed French stuff from hu_stuff.c.
- Discovered big booboo on my part. Chat hasn't been working since version
  1.11 has it? I was comparing ev->data1 with 't' in hu_stuff.c, but data1
  is a scancode, not ASCII.
- Removed RCS ID lines from all the source files. I only have RCS on my Amiga,
  and that's not the machine I'm using to develop this.

June 5, 1998
- Created some new pr_* classes for the gib throwing code.
- Removed RNG shuffling from P_Random() since it was screwing up sync in
  demos and network games.

June 4, 1998
- Made network ticcmd's variable length using the demo packing.
- Removed reference to turbomesage in G_Ticker().
- Simplified RefreshPalette() so that generating the invulnerability colormap
  uses fewer multipilies and no divides.

June 3, 1998
- Fixed P_InitSwitchList() so that the retail version is treated like the
  registered version instead of the shareware.
- Removed Martin Howe's code from w_wad.c and replaced it with a combination
  of code written by me and code from Boom. (Using hash tables speeds up
  level loading a *lot*--far more than I expected!)
- Added key repeating to the console. (So easy, I should have done it sooner.)

June 2, 1998
- Removed DEVONLY macro and added DPrintf() function.

June 1, 1998
- Fixed a bug in C_InitConsole when it reformats the console buffer. I had
  been using Printf (string); to reformat the text, but if string contained
  any sequences like "%s" I would be in big trouble. So now I use
  Printf ("%s", string);
- Fixed a problem with the invulnerability color map being wrong. I had
  been subtracting from 4278190080 when I calculated the inverse.
  (Don't know where I got that number from!) Also discovered my other
  stuff wouldn't work, so I just went and switched to fp like dcolors.c uses.
- Fixed a bug in the DeHackEd text replacement code I had introduced when
  I added support for ambient sounds. It was checking the names of all
  sound effects, but the ambient sounds start out with no names, so I
  ended up dereferencing a null pointer once I reached sfx_ambient0.

May 30, 1998
- Replaced lots of constant 35's with TICRATE (when measuring time).
- Switched to the BOOM random number generator.
- Added onfloor parameter to P_SpawnMobj() for when I actually support
  Hexen-style maps (which have a z parameter for Things).
- Changed to using mapthing2_t's internally instead of mapthing_t's.
- Created entries for Hexen-style maps in doomdata.c.
- Added a repeat byte to DEM_USERCMDCLONE to shrink demos even more.

May 29, 1998
- While recording a demo, discovered that I can't telefrag monsters.
  Must investigate.
- Added DEM_USERCMDCLONE command to indicate that this user command in the
  demo is the same as the previous one. Drastically reduced demo sizes.
- Scrapped support for my previous ZDEM format completely and adopted
  an IFF FORM instead.
- Changed all SVC_* labels to DEM_* since they have nothing to do with
  server-to-client communication and everything to do with demos.

May 28, 1998
- Got ZDEM recording and playback working again.
- Got idea from Boom: Rewrote all occurences of P_Random()-P_Random() that
  I could find so that they don't make assumptions about the order of
  execution. Old demo playback improved noticably (but it still gets out
  of sync easily). Even better, ZDEMs now appear to play back properly in
  both the release and debug builds.

May 26, 1998 - May 27, 1998
- Studied the code generated by the Hexen utility ACC and wrote a utility
  capable of disassembling BEHAVIOR lumps.

*******

May 25, 1998
- Released ZDoom 1.13
- Made gibs toggleable with testgibs cvar.
- Created zdoom.wcf file.
- Wrote some more documentation.
- Finished demo.wad
- Finished ambient sound support:
    Point random and periodic.
    World (& surround) continuous, random, and periodic.
    Limited SNDINFO lump support.
- Added the new level flags to the MAPINFO parser.

May 23, 1998
- Continued work on ambient sounds:
    Positional sounds with specific volumes work.
- Fixed intermission maps for Doom I. (I had broken them when I stopped
  identifying maps by episode and level numbers.)
- Added some more level flags to generalize behavior that had previously
  been restricted certain levels. Also removed LEVEL_SECRET and didsecret
  references, since I can now mimic them using LEVEL_VISITED.

May 22, 1998
- Started support for ambient sounds:
    Positional, continuous sounds work.
- Fixed coop intermission stats.
- Fixed bug in I_FinishUpdate() that could cause it to crash if the
  fps meter was up and it was called in very quick succession.
- Tried the following to fix the NT mouse bug:
	Read the mouse after reading the keyboard.
	Poll the mouse's position using GetDeviceState().
  Both methods failed to fix the problem. :-(
- Fixed handling of secret levels in G_WorldDone().
- Fixed problem with finale writer showing the full text of a message
  during wipes.
- Fixed display of cluster entry text in G_WorldDone().
- Discovered that R_DrawMaskedSky() doesn't work for sky textures that
  are actually masked (probably due to the way the composite texture
  generator works, but I could easily be wrong). Will investigate
  further later.
- Discovered that DITerm() was never being called, so I threw a call to
  it into I_ShutdownGraphics().
- Failure to specify a next map in the MAPINFO now repeats the current
  map instead of crashing.
- Added support for maps without music specified in their MAPINFO.

May 21, 1998
- Finished MAPINFO parser, began work on demo (and test) wad.

May 20, 1998
- Started work on a parser for MAPINFO lumps.

May 19, 1998
- Changed ST_doPaletteStuff() to be dynamic and use a larger range of
  blendings.
- Added W_FindLump() command.
- Changed W_CacheLumpNum() so that it allocates an extra zero byte after
  the end of the lump.
- Modified dehacked code to parse the patch file from memory so that
  they can be stored inside a wad file.
- Added limits command to list the state of all dynamic limits.
- Added default binding to the SysRq (Print Screen) key: "screenshot".
- Discovered the pause key wasn't getting bound by default. Fixed.
- Changed .cfg comments to anything starting with '//' rather than lines
  starting with ';'.
- Changed the default config file to zdoom.cfg and added the -config
  parameter to choose alternate ones. (Blargh! Doom Legacy decided to
  use config.cfg as it's default config file, when I've been using it
  all along!)

May 18, 1998
- Tried adding support for saving TGA screenshots and discovered that PTC's
  image class doesn't actually do anything for a save.
- Changed M_ScreenShot() to accept a filename (if desired) and added a
  screenshot console command that can be used to specify one.
- Changed WritePCXFile to use ARGB values instead of RGB triples so that
  I can pass it the colors array from a palette_t.
- Bumped the screenshot limit in M_ScreenShot up to 10000 different
  images (properly this time); changed the I_Error to a simple error
  message (no reason to kill the program if you can't take a screenshot);
  and added support for dumping true color files.

May 16, 1998
- Removed the MAXSPECIALCROSS limit.
- Made palette blending dynamic and added the testblend command to
  make sure that it actually works properly.
- Moved the gamma correction stuff from v_video.c into v_palette.c.
- Fixed the color of the red player in the automap.
- Changed I_SetPalette() to take a pointer to an array of uints instead
  of RGB triples and avoid gamma correction since that should be done
  before the call to I_SetPalette().

May 15, 1998
- Added V_Clear() function to set a rectangle to a solid color.
- Added dmflags, fraglimit, and timelimit cvars. Alas, they are just
  placeholders for the moment.

May 14, 1998
- Discovered a bug in Doom Legacy's assembly R_DrawColumn while I was
  in the process of rewriting it: They were calculating (centery-dc_yl)
  when it should have been (dc_yl-centery).
- Rearranged FixedDiv_ASM() to make it pair better on a Pentium and
  aligned the main division code to a 16 byte boundary.

May 13, 1998
- Removed the next and prev links from the definition of a vissprite_t
  since they were used only for the bubble sort.
- Changed R_SortVisSprites() to use the stdlib qsort() function instead
  of a bubblesort, the end result being that scenes with a lot of sprites
  are a *lot* faster than before. For means of comparison, I played DOOM2
  MAP30 until I got MaxVisSprites up to 1824, and the lowest my framerate
  ever went was 13 fps. That's compared to my earlier run where a mere 992
  sprites slowed me down to about 3 fps.
- Fixed bug in the C-based R_DrawFuzzColumn?()s: I wasn't properly
  masking fuzzpos when I added 3 to it at the end.
- Added preliminary C-based ARGB drawers to r_draw.c. They work, but
  slower than I would like.
- Changed the main column drawers in r_draw.c into pointers that can
  point to different routines depending on the screen depth (and/or
  presence of assembly/MMX routines). This is essentially the route
  DOSDoom takes, except I didn't split r_draw.c into two files.

May 12, 1998
- Fixed the below bug. I now set dc_mask to 0xff at the beginning of
  R_DrawVisSprite() since it wasn't always large enough. A nice side
  benefit of this is that it allows for taller sprites than before.
  (Considering that I added dc_mask a few weeks ago, I'm surprised it
  took me so long to notice this!)
- Discovered a weird bug. Things were occasionally being drawn with their
  heads being repeated near their feet but still clipping to the original
  shape of the thing. In DPaint, I could do this by drawing the thing once,
  then turning the background into a stencil so I can't draw over it and
  drawing the thing lower but in the same horizontal position.

May 11, 1998
- Started adding gibs (sprite grouping in w_wad.c is always enabled now).
- Started adding support for RGB modes in various spots.
- Separated all the V_DrawPatch* functions into various wrappers and
  column drawers. This makes it easy to use the same function for both
  indexed and direct color modes and to add more (which I have done)
  without too much work.
- Created R_DrawSky() out of first part of R_DrawPlanes() for
  double sky drawing. Created R_DrawMaskedSky() that draws masked
  sky textures (i.e. the front one for a double sky); it can also
  properly tile any height sky but at a performance hit.
- Moved definition of skyiscale from r_things.c int r_sky.c and split
  it into sky1iscale and sky2iscale. Also created their inverses:
  sky1scale and sky2scale.
- Added r_stretchsky cvar to stretch the sky if it isn't taller than
  128 pixels.
- Rewrote DimScreenPLoop() so that it should be slightly faster now.
  Still has lots of AGI stalls, though. :-(

May 8, 1998
- Added detail mode setting to display options menu.
- Implemented horizontal pixel doubling.
- Added ds_colshift to go along with ds_colsize.
- Changed R_ExecuteSetViewSize() so that the view window it creates is
  always a multiple of 16 bytes wide.
- Moved definition of rowbytes out of tmap.nas and into r_draw.c and
  renamed it dc_pitch. Also created ds_colsize variable. Renamed
  ASM_PatchRowBytes() to ASM_PatchPitch() and created ASM_PatchColSize().
- Moved the call to I_BeginUpdate() in D_Display() after the call to
  R_ExecuteSetViewSize(). This lets it update the display pitch
  properly based on any changes to detailyshift. Previously, it would
  use the old pitch for one frame before switching over, which is why
  it was crashing yesterday.

May 7, 1998
- Started adding detail modes back in. Got vertical doubling working
  although I ran into a few unexpected problems. Also crashes when I
  switch from doubled to non-doubled. :-(
- Added fullscreen option to video modes menu.
- Created a "Video Modes" patch and changed the "Video Options" patch
  to "Display Options."

May 6, 1998
- Fixed the drawing of the faceback on the status bar in network games.
  (I can't believe I messed that up!)
- Added fragcount to player quit (netgame) messages.
- Added -noidle parameter to disable lowering of ZDoom's priority to
  the idle class when the window loses the focus (so that running a
  netgame on a single machine doesn't slow down too much because one of
  the sessions only receives processor time during idle moments).
- Removed the need for the leading . in IP addresses for -net.
- Added support for different ports per machine in network code.
- Changed i_net.c so that Win32 platforms now print descriptive errors.
- Fixed -net parameter so that address list can end at +commands.
- Added player obituaries.

May 5, 1998
- Adjusted options menu code so that pressing ENTER, T, and D always do
  their special functions when in the video modes menu and not just when
  the current item is of type screenres.
- Hacked double buffering into PTC's idirectx.cpp. Why? Because it
  improves compatibility with a lot of video cards under NT (like my
  old one) that don't support locking the primary surface directly.
- Mucked around in PTC's idirectx.cpp for several hours and finally got
  it to work properly in fullscreen. Yay! (I really hope a future release
  has proper support for this built in.)

May 4, 1998
- Changed (PTC's) idirectx.cpp so that it allows Ctrl-Alt-Del in
  exclusive mode.
- Looked through V_PrintStr2() and finally realized why it was crashing
  on non-MMX machines: I failed to check the status of UseMMX before
  calling EndMMX().

May 1, 1998
- Downloaded PTC 0.72. It still gets slow on the blits, but at least now
  I have the source code for it.
- Tried using PTC's BitBlt() inside I_Blit() and came across a weird
  problem: The more blits I do, the slower they get. That sucks.
- Changed the focus-losing and gaining mechanism in i_input.c. Instead
  of sending pause events, it just pauses the sound. Changing fullscreen
  video modes caused the window to lose and regain its focus a bunch, and
  it was messing up the pause sending code, sometimes leaving the game
  paused after a mode change.
- Changed R_PlaneInitData() so that it allocates the fixed_t arrays
  separately instead of all together.
- Played Blood for a little bit. That, and a prior suggestion concerning
  rocket jumping made me decide to make a slight tweak to the freelook
  code: You can now look down twice as far as before.

April 30, 1998
- Figured out why PTC clipping windowed modes larger than 512x384:
  They were larger than the initial window size! I work around it
  by resizing the window and then reinitializing PTC.
- Moved some variable declarations out of i_input.h and into
  i_input.c, eliminating some in the process.
- Realized that C_AddNotifyString() really *was* perpetuating changes
  to its input string. Now I make a copy of that and work with it to
  save myself some headaches. Plus, the const identifier is now 100%
  correct.

April 29, 1998
- Changed R_DrawColumn_ASM() and R_DrawTranslucentColumn_ASM() so
  that they check the size of the column *before* looking into
  ylookup and columnofs (thus avoiding the occasional page fault).
- Discovered that R_ExecuteSetViewSize() could be called outside of
  D_Display(). In this case it was in G_DoLoadGame(), and that
  messed things up when I used the -loadgame parameter on the command
  line. Now R_InitBuffer() locks the screen before grabbing the
  buffer pointer and pitch.

April 28, 1998
- Changed cvar() function so that if a cvar of the specified name
  exists, it still changes the cvars flags. (i.e. it gets loaded from
  the config file before this function is called.)
- Added win_stretchx and win_stretchy cvars to stretch the windowed
  display.
- Fixed hang at shutdown: wasn't decrementing counter in I_WaitVBL().
- Received and installed 128 MB of RAM and a 32x CD-ROM drive. :-)
- Got ZDoom working in a window through PTC. It doesn't do fullscreen
  yet, but that's only because I haven't written any code to handle it
  yet. It also gets into an infinite loop during shutdown. (Should be
  easy to fix.)

April 25, 1998
- Started working on PTC-ized i_video.cpp.
- Weird palette problem now. When switching modes, ZDoom will only
  very rarely set the palette properly. Me guessing it's a Win95
  problem, since I didn't see this under NT. Shouldn't really matter
  since I'm switching to PTC anyway.
- Fixed fuzzoffset[] initialization. I was using screen[0]'s pitch
  without first locking it to ensure that the value stored in the
  screen was valid.

April 24, 1998
- Discovered I have a problem adjusting the fuzzoffset[] table
  dynamically. Looks like it still keeps its old values. Will
  investigate further tomorrow.
- Finished the video modes menu. My options menu code is nowhere near
  as neat as I would have liked. Oh well...
- Implemented mode testing from the video modes menu. D_ProcessEvents()
  was hacked to make it work. (There might be a better place, but this
  was the first function I saw, and it works.)
- Figured it out: I wasn't reallocating negonearray when I resized the
  screen. Doh! Moved its initialization from R_InitSprites() into
  R_MultiresInit(). For consistancy, I now allocate screenheightarray
  and xtoviewangle in R_MultiresInit() instead of V_SetResolution(), too.
- Noticed I seem to have a problem with the playersprites now. Some
  columns aren't getting drawn completely. Which ones and how much is
  missing seems to vary depending on the game state. This is worse the
  wider the sprite is drawn. At 320 wide, I can't detect it, although
  if it covered the entire width of the screen, it would probably pop
  up. Don't know what's going on here, since it worked fine before.
  When did this happen?

April 23, 1998
- Discovered that the boolean being used in i_video.c was only a byte,
  so I looked through the standard header files, and it looks like
  rpcndr.h is the culprit with this line:
	typedef unsigned char boolean;
  Went through all my files where I've defined __BYTEBOOL__ by hand and
  changed all occurances of boolean to BOOL. Then I found out that that
  caused problems with variables that had been declared as boolean in
  header files, so I changed all the remaining instances of boolean to
  BOOL.
- Started work on the video modes menu.

April 22, 1998
- Discovered I wasn't locking the back buffer in wi_stuff.c when
  I wrote drew the background on it. Fixed.
- Added code to actual change the screen resolution and discovered I
  wasn't reallocating the VisPlanes' top and bottom arrays, so you
  couldn't switch to a screen larger than what you started with. Fixed.

April 21, 1998
- Started work on dynamic resolution changing. Most of it was already
  done when I added the multires support. Just need to change the size
  of the display surface now; everything else seems to works.
- Fixed evil bug in V_SetResolution(): I had been allocating
  xtoviewangle[] with one too few angle_t's. Ouch.
- Fixed a bug in AddToHash() that caused it to "forget" the previous
  contents of a bucket when a new entry was added to the beginning
  of the bucket.
- Added a callback to the screenblocks cvar, so that ZDoom will sense
  changes to it and adjust the screen as needed.
- ...I now allocate two screens for the status bar. If it's not scaled
  I continue drawing to the screen as before and pretty much ignore the
  second buffer. However, if the status bar is scaled, then I draw all
  the changes into the second buffer and then blit the entire thing onto
  the screen. It works, but it's also slower.
- Added support for scaling the status bar (use st_scale cvar). When I
  did this, I noticed that V_DrawPatchStretched() looks horrid when it
  draws multi-post columns, because it doesn't line them up properly.
  Plus, the areas that got updated weren't being drawn in exactly the
  same spot as what appeared on the screen, so...
- Changed status bar code so that widget coordinates are relative to
  the status bar instead of the screen, which makes the next change
  easier...

April 20, 1998
- Changed the status bar code so that the status bar surface is only as
  wide as the status bar and not the underlying screen.
- Fixed the wipe: Inside wipe_doMelt(), I had neglected to account for
  the fact that pitch desribed bytes, but d described shorts.
- Removed the use of DDraw's blitter inside I_Blit() since I was still
  having problems with it. Now I do it myself, and it works.
- Fixed blitting: needed to make sure both surfaces were unlocked.
- Got the program running again. Blitting surfaces doesn't work yet. :-(
  Neither do the wipes. (They skip every other line.)
- Removed the fractional part from the fps display.
- Got the code to a point where it builds again.

April 18, 1998
- Added new functions and changed some code in i_video.c to handle
  screens as DDraw surfaces.
- Changed R_VideoErase() to take a rect as a parameter and call V_Blit().

April 17, 1998
- Removed SCREENPITCH, SCREENWIDTH, and SCREENHEIGHT variables from
  doomdef.c. Now I need to remove all references to them.
- Cleaned up v_video.c somewhat in preparation of integrating PTC with
  the video code: created a screen_t structure; transferred SCREENWIDTH,
  SCREENHEIGHT, and SCREENPITCH into the screen_t; added some SHORT()
  macros where I had omitted them; and fixed some spots where I had
  left SCREENWIDTH intact from the original Linux code when it was really
  referring to screen pitch. Also added a small amount of code to handle
  different bit depths.
- Moved registration of vid_* commands out of c_commands.c and into
  i_video.c where they belong.
- Fixed Printf() routine in c_console.c so that it doesn't apply
  printxormask to control characters.

April 16, 1998
- Added code to i_input.c so that it puts the game in the idle priority
  class when the user switches to another window. It also pauses single
  player games now, too.
- Added some code to scroll the sky lixe Hexen. Still need to make it
  configurable, but at least I know it works.
- Tried making some taller (good-looking) skies. I sucked at it.
- Fixed R_DrawFuzzColumn_ASM so that it never draws columns slightly too
  tall. (When drawing the odd pixels before the loop, I had been using
  ebx and bl for two very different tasks. Now I use bh and bl instead.)

April 15, 1998
- Removed tutti-frutti effect for textures 1, 2, 4, 8, 16, 32, and 64
  units tall. Also allow textures taller than 128 units now.
- Tried holding the sky's vertical position constant when freelooking.
  IMO, it's actually worse than letting it move: You can still see it
  wrapping, and it looks weird, too. I guess I'll just have to draw
  some taller skypics if I want something that really looks nice.
- Adjusted P_FindFloor() and P_FindCeiling() to check the health of
  corpses intead of their tics to determine if they have been raised.
- Set the MT_SKULL height back to 56 units from the 30 I had previously
  set it at, since they were occasionally getting stuck in the floor.

April 14, 1998
- Stayed on MAP30 for about 1.5 hours. MaxVisSprites got bumped all
  the way up to 992, and it was slooowwww (except in the corners). Also
  noticed that the plats would sometimes get stuck going up, and I
  shot right through the resurrected corpses. Must fix tomorrow.
  Me go bed now.
- Adjusted the heights of most things to make them better match
  their image sizes. Some were okay as they were, while others were
  way off.
- Did a very quick netgame to see how things looked. Some things are
  too short (like the torches) and others are too tall (like the
  barrels).
- For all intents and purposes, 3D collision detection is now done.
  There is only one potential problem I can foresee: With enough
  vertical velocity, an object could pass right through another
  object in midair. I don't think situations like this will arise very
  often (if at all), so I'm not going to bother rewriting all my new
  code to fix it. At any rate, it's still a lot better than it used
  to be.
- Added targettic to mobj_t to create a delay before missiles can
  impact the thing that shot them. This fixes the problem of missiles
  exploding in the shooter's face before they get anywhere.
- Adjusted P_FindFloor() to search neighboring blocks in the blockmap.
  This solved the problem of occasionally falling into things. Did the
  same thing to P_FindCeiling().

April 13, 1998
- Worked on more thorough 3D collision detection code than my
  previous attempt. (At least it doesn't crash now!) FIXME:
   Missiles are often exploding right in front of the shooter's face.
   It's still possible to land inside of monsters sometimes.
- PIT_RadiusAttack() can now throw things around in three dimensions.
  The only real benefit of this is that it allows for rocket jumping.
  (Which is still pretty cool and well worth the effort of coding it.)
- Made health bonuses and muzzle flashes translucent.
- Fixed bug with Arch-Vile resurrecting a 25% or 75% translucent
  monster. Did equivalent thing for exploding missiles.
- Put idmus cheat and command back.
- Added CVAR_CALLBACK flag for non-latching cvars.
- Added map command to the console.
- Modified G_InitNew() and associated code to use skill cvar.
- Implemented proper cvar latching.
- Hooked localization code into g_level.c. This also cleaned up
  the text patching code in d_dehack.c somewhat, since level names
  and cluster messages are no longer special cases.

April 12, 1998
- Multi-language support is pretty much done. A nice benefit of this
  is that it makes DeHackEd text replacement support easier.
- -iwad and -deh parameters now automatically append the appropriate
  extension (.wad or .deh) if none is specified with them.
- IdentifyVersion() now sets gamemission according to which IWAD
  it finds.
- Removed -shdev, -regdev, and -comdev parameters.
- Fixed inadvertant bug in st_new.c that prevented ZDoom from
  working with the shareware IWAD. I had previously been loading
  the ammo patches with W_CacheLumpName() which bombs out if it
  can't find a named lump (like CELLA0 which isn't in the shareware
  WAD). Now I check for the presence of the lump before I try to
  load it.

April 11, 1998
- Created strutil utility to create string lumps for ZDoom. Also
  created source files for strutil containing the English and French
  translations. (Though English will still be stored in the
  executable as a fallback and to assist with DeHackEd patch text
  replacement.)

April 10, 1998
Not much done today:
- Added g_unlimitedammo cvar.
- Added optional fall damage code originally created by Andy Kempling.

April 9, 1998
- Fixed the pickup of health bonuses. Before, the bonuses maxed
  out at deh_MaxHealth. Now they max out at deh_MaxSoulsphere.
- Added I_SetTitleString() so that we can once again display the
  game banner at startup.
- Removed -wart parameter.
- Completely rewrote the tab completion code. :-) It still works
  the same from the end-user's point of view, but now the code is
  a whole lot cleaner and more flexible.

April 8, 1998
- Implemented tab completion for the console. The associated code
  is really convoluted, but at least it works.
- Implemented monster infighting for DeHackEd patches. It
  was really easy once I looked in the DeHackEd source and
  figured out that it was modifying PIT_CheckThing(). Too bad
  I didn't do this a day earlier...

April 7, 1998
- Updated the documentation and uploaded 1.12 to cdrom.com.
- Put the integer divide code back in FixedDiv_ASM().
  I'm pretty sure the real problem was with my overflow
  detection code, which I fixed yesterday when I put in
  the float code. It works properly now and always
  rounds down. (Some code such as the sprite drawer assumed
  that this was the case, but using floats rounded to the
  nearest integer.) I just don't understand why the problem
  didn't show up much sooner.

April 6, 1998
- Added am_showsecrets, am_showmonsters, and
  am_showtime cvars.
- Added V_DrawPatchTranslatedCleanNoMove() and
  V_DrawTextClean(). Changed console notify text
  code and automap text code to clean scale their
  text.
- Made a change to P_CrossSubsector() that ought
  to speed things up marginally.
- Fixed a small bug in P_DivlineSide() that was
  in the original id code.
- Rewrote FixedDiv_ASM() to use floating point
  math, and it worked. Also removed division by
  zero check, since it appears it's still being
  called with b==0. It looks like DOOM doesn't
  ensure that it never divides by zero and makes
  an assumption about the way FixedDiv() will
  handle these cases.
- #defined NOASM to disable the use of assembly
  routines, and it seemed to run fine. Recompiled
  with assembly routines except FixedDiv_ASM() and
  it still worked.

April 3, 1998
- This crashing stuff is getting even weirder. At
  first, if I disabled optimization in the release
  build, it went away. Now it's showing up under
  all configurations, and I haven't done anything
  to the code. I'm at a loss as to what to do. :-(
- Fixed an obscure bug in FixedDiv_ASM(). When it
  overflowed, it was popping esi instead of ebx.
  Also added a check for division by zero.

April 2, 1998
- Did some bug hunting. The problem is happening in
  P_CrossSubsector(), so it's likely something that
  happens before then, since I never touched that
  function.
- Moved the FPS drawer in I_FinishUpdate() before
  the -devparm dot drawer.

April 1, 1998
- Added Andy Baker's stealth monsters code. Upon
  tessting, a discovered the release build was still
  crashing even without loading a .deh file. My guess
  is that this is the same problem I had on the P60,
  and adding the DeHackEd code just reorganized things
  enough for the problem to show up on my machine too.
- Changed P_TouchSpecialThing() so that picking up a
  power plays a surround sound.
- Continued DeHackEd support. Most text strings now
  get replaced, and almost all miscellaneous info is
  supported as well. Still crashes in the release build.

March 31, 1998
- Continued work on DeHackEd support. Everything except
  miscellaneous info and text changing is supported.
  Unfortunately, my release build is experiencing crash
  problems not present in the debug build now. :-(
- Ripped the MHFX_LAXSPRITEROTATIONS fix out of
  DOSDoom's r_things.c.

March 30, 1998
- Started work on DeHackEd support: things, frames,
  and weapons done. Sounds mostly done.
- Added minimal code to handle changes to userinfo cvars.
- Changed player movement code to allow for very minimal
  corrections to momentum while in mid-air.
- Did a quick test of z-checking for collisions. Needs
  more work; disabled for now.
- Optimized FixedDiv_ASM() further using a neat absolute
  value trick I discovered on a website somewhere.
- Did the same thing for P_BulletSlope(). One unexpected
  twist: bullets always hit walls no matter what their slope.
- Added shoot up/down for projectile weapons with a
  quick hack to P_SpawnPlayerMissile().
- Moved ysheer out of player_t and into mobj_t as pitch.
- Changed P_ExplodeMissile() to set missile explosion
  sprites translucent.
- Changed D_DoomMain() so that it always loads zdoom.wad
  first instead of second.
- Added m_alloc.(c|h) so that I can finally check to
  make sure I get all the memory I ask for with malloc().
- Finished automap overlay. Use am_overlay cvar.
- Moved automap framebuffer boundary determination out of
  AM_LevelInit() and into AM_Drawer(). Did other mucking
  about in the automap code so it clips the automap to the
  view window when the map is overlayed on top of it.

March 29, 1998
- Jotted down some code for truecolor routines.

March 28, 1998
- Worked on automap overlay.
- Changed C_DoKey() to return true if the key generated a
  command, and false if it didn't.
- Automap can now rotate. Use am_rotate cvar to control it.
- Finished new HUD (for now). It gets the job done, and it's not
  too cluttered.

March 27, 1998
- Continued work on new options menu: Removed old sound menu.
  Created new menu title patches. Created controls menu.
  Created video menu.

March 26, 1998
- Started work on the new options menu.
- Created binddefaults command.
- Created a bunch of menu_* commands to access the different
  menus directly. Also added some of them to the default
  bindings string.
- Fixed sky height bug. The key is that skytexturemid is NOT
  resolution-dependant. It is a constant.
- Changed yesterday's sky height fix so that it is based on Doom
  Legacy's aspect ratio correction rather than what DOSDoom did.
  (BTW, this was not done in the 1.11 Doom Legacy source. :-)

March 25, 1998
- Fixed sky height with a little help from DOSDoom.
- Started work on the new HUD. Not yet sure what I like.
- Created the C version of Print2CharP_MMX. It sucks. I know there
  must be a clever way to do it using bit shifts and masking, but
  I don't feel like persuing it right now, since I have an MMX
  machine, and MMX makes it very easy to do.

March 24, 1998
- Ran ZDoom on the Pentium 60 sitting next to me. It crashed whenever
  I tried to enter a level. Some testing is obviously called for. :-(
- Added code to check for the presence of MMX support.
- Created misc.nas and moved the assembly versions of FixedMul() and
  FixedDiv() into it. Also created an assembly inner loop for
  V_DimScreen(). Also created an assembly routine to plot one conchar
  to the screen (Print1CharP) and an MMX version that doubles the
  conchar in size.
- Made command parameters in commands.txt consistant with other
  parameter lists. (<> for required params, [] for ones that aren't.)
  Also added brief descriptions of the different cvar types at the.
- Removed idmypos command. It was redundant with the
  "toggle idmypos" command.

March 23, 1998
- Added dimamount and dimcolor (defaults to gold) cvars for
  V_DimScreen() so that it can shade the screen to any color instead
  of just darkening it (although it will revert to its old behavior if
  translucency is disabled).
- Added assembly version of R_DrawFuzzColumn as well as a proper
  assembly version of R_DrawTranslucentColumn().
- Changed fuzztable in r_draw.c from 50 to 64 entries so that I can
  use a simple mask in R_DrawFuzzColumn() instead of conditionals.
  This should speed up that loop significantly (especially once it's
  in assembly). Also removed references to frac and fracstep from
  R_DrawFuzzColumn() since they weren't needed.
- Can't seem to get V_DrawPatchFlipped() to position patches properly
  (they keep getting drawn too far to the left and up), so for now,
  it just calls V_DrawPatchIndirect().
- Added special case to V_DrawPatchStretched for full-screen patches.
  Also added a scrn parameter to F_DrawPatchCol to accomodate this.
- Changed cyberdemon and spider mastermind sight and death sounds
  in the cast finale to surround.
- Changed brain's pain sound to use ORIGIN_SURROUND2. That way, the
  things it throws out won't override it.
- Added ORIGIN_AMBIENT3-4 and ORIGIN_SURROUND2-4 to s_sound.(c|h).

March 19, 1998
- Fixed UpdateCursorPosition() in i_input.c so that mouse
  sensitivity is independent of the framerate.
- Increased speed of text wipe in f_finale.c.
- Added V_DrawRedTextClean(), V_DrawWhiteTextClean(), and
  V_DrawTranslatedPatchStretched(), and V_DrawTranslatedPatchClean()
  to v_video.c.
- Fixed bug in V_DrawPatchStretched(). Was using unsigned ints where
  I should have used signed ints.
- Rewrote F_Ticker().
- Specifying -nomusic no longer causes I_InitSound() to allocate
  channels for MOD music.
- Changed several V_DrawPatch()es and V_DrawPatchDirect()s to
  V_DrawPatchClean() and V_DrawPatchIndirect() in various source files.
- Added V_DrawPatchIndirect(), V_DrawPatchClean(), and
  V_DrawPatchCleanNoMove() to v_video.c.
- Made lots of changes relating to level and cluster handling.
- Fixed problem in wi_stuff.c that prevented par times from appearing
  on Doom II levels 12 and above.

March 18, 1998
- Changed idmus command to changemus. Now it expects its input
  to be an actual song name. (Consquently, the idmus cheat is gone.)
- Moved stuff from S_music[] into LevelInfos[];
- Changed all references to leveltime, totalsecret, totalkills, and
  totalitems to level.time, level.total_secrets, level.total_monsters,
  and level.total_items respectively. levelstarttic was never used;
  got rid of it.
- Remaved mapnames* arrays from hu_stuff.c and some ST_MAP* #defines
  in st_stuff.c.
- Moved drawing of level name in automap out of hu_stuff.c into am_map.c.

March 17, 1998
- Started laying the framework for better customizability of maps.
  (Any lump can be a map, use any map for the next and secret maps,
  give custom maps a name, custom par times, etc.)
- Played at 640x480 for about 1.5 hours trying to get my machine
  to crash. I have had a report of intermittant crashing possibly
  related to high resolutions, but have been unable to duplicate
  the problem on my machine. On a side note, 640x480 is way too slow.
  Doom95 does ~32 fps at 640x400, and Duke 3D does ~25 fps at 640x480.
  I get ~10 fps at 640x480 and ~12 fps at 640x400. Wish I knew how
  they do it...

March 16, 1998
- Hacked in some code into S_ChangeMusic() to allow it to play songs
  stored as individual files on disk. Added primarily because I
  have a large collection of MODs, and I don't want to be forced
  to pick which ones I want to listen to when I start the game
  (by specifying them with the -file parameter).
- Discovered the Win32 Demo Programming FAQ. Now I can disable
  code segment protection so self-modifying code can stay in
  the same segment as all the other code instead of hiding in
  the data segment.
- Put in the R_DrawColumn code from Doom Legacy. Took me awhile to
  realize that ylookup and columnofs are now pointers instead of
  arrays.

March 14, 1998
- mb_used changed to a float, so the heap doesn't need to be an
  integral number of megs in size.
- Added -heapsize parameter to set size of zone heap at run time.
- Increased size of demoname[] from 32 to 256 chars.
- Rewrote snippets of -playdemo code so that demos can be played
  from any directory and with any path.
- Removed all references to basedefault, since it's been replaced
  by configfile.
- Fixed a really dumb bug in FixPathSeperator. Was initializing
  c to progdir instead of path. Now you can add lumps in different
  directories, and still refer to them by name.
- Reformatted w_wad.c for 4 character tabs.
- Looked through the PTC archive. It needs better documentation, but
  I think I'll probably switch to it for the third release of ZDoom.

March 13, 1998
- Added back some of the stuff I had originally added to w_wad.c.
- Borrowed BT_JUMP and BT_DUCK from DOSDoom. Also added jumping code.
- IDFA and IDKFA now include the backpack.
- Downloaded Prometheus Truecolor. Trying to decide if I should use it
  for high- and true-color support.
- Added support for caching the translucency tables to disk.
  (TODO: Compress this file.)
- Added support for 25% and 75% translucency (because DOSDoom 0.60
  has it.)
- Copied w_wad.c and w_wad.h from DOSDoom 0.60. (decided not to
  bother trying to get PACK support in)
- Moved ConChars data into zdoom.wad as an ordinary patch. zDoom now
  generates the neccessary data on the fly.
- Removed MAXCEILINGS limit. (was 30)
- Removed MAX_DEATHMATCH_STARTS limit. (was 10)
- Removed MAXPLATS limit. (was 30)

March 12, 1998
- Rewrote P_FindNextHighestFloor() so that it doesn't use an internal
  array (thus also removing the MAX_ADJOINING_SECTORS limit).
- Removed some files from the code directory I had added but never used.
- Removed MAXSEGS limit. (was 32.. What are solidsegs anyway?)
- Removed MAXDRAWSEGS limit. (was 256)
- Now allocate R_DrawSprite()'s clipbot and cliptop arrays inside
  R_MultiresInit() instead of each time the function is called. Should
  have done this in the first place, but I obviously wasn't thinking.
  One particularly sprite-laden scene went from ~25 fps to almost 35 fps.
- Created R_MultiresInit() function. Now V_SetResolution() calls it, and
  it calls the various R_*() functions related to supporting multiple
  resolutions.
- Changed the default am_gridcolor to a decent color that actually fits
  with the rest of the color scheme.
- Took a cue from WinDoom and split my keyboard handler between the
  DirectInput code and the window's message handler. Ugly, but at least
  now it handles Pause and Alt-Tab properly. (The original problem with
  Alt-Tab, incidentally, was that I was failing to reacquire the keyboard
  when I regained the input focus.)
- Inserting text at the command line in the console now works properly.
- Pressing ` to hide the console now clears the command line. This is
  the same behavior as Quake, but previously only Escape would clear the
  command line in ZDoom. I found that to be too annoying.
- Pressing up and down arrow keys in the console to scroll through the
  history now ensures that the cursor is always visible.
- Changed BuildString() so that if it is called with argc==1, it just
  returns a copy of the string unmodified instead of sticking it in
  quotes if it contains a space.
- Renamed setcolorbyname to setcolor. The former was just too long.
- Added setcolorbyname command and corresponding V_GetColorStringByName()
  function and X11R6RGB lump listing a bunch of named colors.

March 11, 1998
- Added crosshair cvar and corresponding code to draw the crosshair.
  Put some cheezy crosshairs in zdoom.wad, too. (Now if only you could
  actually aim up and down...)
- Added V_DrawLucentPatch() function to draw translucent patches.
- Added freelook, lookspring, lookstrafe, m_pitch, m_yaw, m_forward,
  and m_side cvars.

March 10, 1998
- Added invertmouse cvar.
- Put the colon back into the "startskill..." message in d_net.c.
- ylookup[] and columnofs[] tables in r_draw.c are now allocated
  dynamically based on screen size. Hacked this into R_InitFuzzTable().
- Status bar finally properly draws borders to the left and right
  of itself if the screen is wider than it is.
- Added documentation for am_* and developer cvars in commands.txt.
- Discovered that lines not yet seen but visible thanks to the
  automap powerup were not color-configurable. Changed it.
- Changed all color #defines in am_map.c into ints that get
  initialized from color values in cvars each time
  AM_initVariables is called. Also added back support for the
  original automap color scheme regardless of what the user's colors are
  through the am_usecustomcolors cvar.
- In single player, automap can now draw the player's arrow using
  any color and not just WHITE.
- Removed all references to lightlev in am_map.c, including the
  AM_updateLightLev() function. The "strobe" effect was really cheap
  anyway, never used, and will be fairly difficult to implement
  cleanly when I make the automap colors customizable.
- Changed I_Error() call in ParseHex() to a Printf() call.
- Removed "extern byte *demo_p;" from d_protocol.c. It didn't need to
  be there anyway.
- Added V_GetColorFromString() to v_video.c.
- Changed BASEYCENTER #define in r_things.c from
  (100-((SCREENHEIGHT-200)/12)) to (100). PlayerSprites are now drawn
  in approximately the same location at all resolutions.

March 9, 1998
- Seem to have finally fixed the problem with my visplane growing
  code. Using calloc() in PrepVisPlanes() instead of malloc() seems
  to have solved all my woes. Now on to something else!
- Boy do I feel dumb. Found a bug in C_DrawConsole () where the
  revealed variable wasn't always being set before it was used.
  Now I rewrote it so that it doesn't need to calculate
  revealed at all. It ought to be marginally faster, too (although
  it probably won't make a bit of difference during gameplay).

March 7, 1998
- Still working on MaxVisPlanes bug. This is proving to be more
  elusive than I had expected, since VC++ is being most unhelpful.
  The bug doesn't show up in the debug build (heap checking doesn't
  even catch anything), and I can't use the debugger on the release
  build where the bug does show up! Grrr!

March 6, 1998

- Started changing MAXVISPLANES constant into the growing integer
  MaxVisPlanes. Moved some code from R_PlaneInitData() to
  R_InitPlanes() and added the GetMoreVisPlanes() function to
  allocate more planes. Strange crashing bugs in release but not
  debug builds. Probably stomping on memory somewhere.
- Fixed stupid bug in I_ShutdownSound: was calling MIDASfreeSample()
  when I should have been calling MIDASfreeChannel(). Also moved
  freeing of channels to another for loop (probably not necessary, but...).
- Fixed -file parameter to work with console commands on the
  command line.
- Changed MAXVISSPRITES constant into the integer MaxVisSprites,
  which is the size of the vissprites[] array. This value can now
  grow as needed to accomodate more vissprites.
- Added developer cvar and DEVONLY macro.
- Functions in i_music.c now pay attention to the looping flag.
- C_AddNotifyString() now pays attention to show_messages cvar.
- Added support for specifying console commands on the command line.
